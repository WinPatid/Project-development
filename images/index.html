<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>р╕гр╕░р╕Ър╕Ър╕Ир╕нр╕Зр╕Др╕┤р╕зр╕нр╕╣р╣Ир╕Лр╣Ир╕нр╕бр╕гр╕Цр╕вр╕Щр╕Хр╣М</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
/* CSS р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Фр╕╡р╣Др╕Лр╕Щр╣Мр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕кр╣Ир╕зр╕Щр╕Щр╕╡р╣Йр╕бр╕▓р╕Ир╕▓р╕Бр╣Вр╕Др╣Йр╕Фр╣Ар╕Фр╕┤р╕бр╕Вр╕нр╕Зр╕Др╕╕р╕У) */
:root {
--header-bg: #37474f; /* р╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щр╣Ар╕Вр╣Йр╕б/р╣Ар╕Чр╕▓р╣Ар╕Вр╣Йр╕б р╕кр╕│р╕лр╕гр╕▒р╕Ъ Header */
--primary-color: #4CAF50; /* р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕лр╕ер╕▒р╕Бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ыр╕╕р╣Ир╕бр╣Бр╕ер╕░р╣Ар╕Щр╣Йр╕Щ */
--secondary-color: #26a69a;
--step-active: var(--primary-color);
--step-inactive: #bdc3c7;
--background-color: #f8f9fa;
/* р╕кр╕╡р╕кр╕│р╕лр╕гр╕▒р╕Ъ Login Modal */
--modal-bg-color: #D3746D;
--modal-primary-color: #B3514A;
--modal-font-light: white;
}

body {
font-family: 'Arial', sans-serif;
margin: 0;
padding-top: 60px;
background-color: var(--background-color);
color: #333;
}

/* 1. Navbar р╣Бр╕ер╕░р╕Ыр╕╕р╣Ир╕б Login */
.navbar {
background-color: var(--header-bg);
padding: 10px 50px;
display: flex;
justify-content: space-between;
align-items: center;
position: fixed;
width: 100%;
top: 0;
left: 0;
z-index: 1000;
box-sizing: border-box;
color: white;
}

.logo {
font-size: 1.2em;
font-weight: bold;
}
.login-btn {
background-color: transparent;
color: white;
padding: 8px 15px;
border: 1px solid white;
border-radius: 4px;
text-decoration: none;
font-size: 0.9em;
cursor: pointer;
transition: all 0.3s;
}

.login-btn:hover {
background-color: white;
color: var(--header-bg);
}
.login-btn i {
margin-right: 5px;
}


/* 2. р╕кр╣Ир╕зр╕Щ Hero/Header р╕лр╕ер╕▒р╕Б */
.hero-section {
padding: 100px 50px;
background-color: var(--header-bg);
color: white;
text-align: center;
}

.hero-section h1 {
font-size: 2.5em;
margin-bottom: 10px;
}

.hero-section p {
font-size: 1.1em;
max-width: 700px;
margin: 0 auto 30px auto;
}

.booking-btn-main {
background-color: var(--primary-color);
color: white;
padding: 15px 30px;
border: none;
border-radius: 5px;
text-decoration: none;
font-size: 1.2em;
font-weight: bold;
cursor: pointer;
transition: background-color 0.3s;
box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

.booking-btn-main:hover {
background-color: #388e3c;
}
/* 3. р╕кр╣Ир╕зр╕Щ Features */
.features-section {
padding: 60px 50px;
text-align: center;
background-color: var(--background-color);
}

.features-grid {
display: flex;
justify-content: space-around;
gap: 20px;
margin-top: 30px;
}

.feature-item {
padding: 20px;
border-radius: 8px;
width: 30%;
background-color: white;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.feature-item i {
font-size: 2em;
color: var(--primary-color);
margin-bottom: 10px;
}
/* 4. Booking Steps Section & Tracking */
#bookingSection, #statusTrackerSection {
padding: 80px 50px;
background-color: white;
min-height: 600px;
}

.main-container {
max-width: 900px;
margin: 0 auto;
padding: 30px;
border-radius: 10px;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}
/* --- Styles for Status Tracking Timeline (р╣Ар╕Бр╣Ир╕▓ - р╕Цр╕╣р╕Бр╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕Фр╣Йр╕зр╕в new-timeline-...) --- */
.timeline-step {
width: 100px;
text-align: center;
position: relative;
padding: 10px 0;
color: var(--step-inactive);
font-size: 0.85em;
}

.timeline-step::before {
content: '';
display: block;
width: 20px;
height: 20px;
background-color: var(--step-inactive);
border-radius: 50%;
margin: 0 auto 5px auto;
border: 3px solid white;
box-shadow: 0 0 0 2px var(--step-inactive);
transition: all 0.3s;
}

.timeline-step.active-step {
color: #333;
}
.timeline-step.active-step::before {
background-color: var(--primary-color);
box-shadow: 0 0 0 2px var(--primary-color);
}
.timeline-line {
flex-grow: 1;
height: 4px;
background-color: var(--step-inactive);
margin: 0 -10px;
transition: background-color 0.3s;
}
.timeline-line.active-line {
background-color: var(--primary-color);
}
/* --- End Status Tracking Styles (р╣Ар╕Бр╣Ир╕▓) --- */


/* --- Styles р╕кр╕│р╕лр╕гр╕▒р╕Ъ Status Tracking Timeline (р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Гр╕лр╕бр╣И) --- */
.new-timeline-container {
    padding: 30px 20px;
    background-color: #f9f9f9;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.new-timeline-steps {
    display: flex;
    justify-content: space-between;
    align-items: flex-start; /* р╕Ир╕▒р╕Фр╣Ар╕гр╕╡р╕вр╕Зр╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ */
    position: relative;
    margin: 20px 0;
}

.new-timeline-steps::before {
    content: '';
    position: absolute;
    top: 20px;
    left: 0;
    right: 0;
    height: 4px;
    background-color: var(--step-inactive);
    z-index: 1;
}
/* р╕Ыр╕гр╕▒р╕Ър╕кр╕╡р╣Ар╕кр╣Йр╕Щр╣Гр╕лр╣Йр╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕Зр╕Бр╕▒р╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕Чр╕╡р╣И Active */
/* р╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й JavaScript р╕Кр╣Ир╕зр╕вр╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕╡р╣Ар╕кр╣Йр╕Щр╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣Ир╕гр╕░р╕лр╕зр╣Ир╕▓р╕З Active Steps */
/* р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Йр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕З HTML р╕Чр╕╡р╣Ир╕Лр╕▒р╕Ър╕Лр╣Йр╕нр╕Щр╕Бр╕зр╣Ир╕▓р╕Щр╕╡р╣Й р╣Бр╕Хр╣Ир╕Ир╕░р╣Гр╕Кр╣Й JS р╣Гр╕Щр╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Зр╣Ир╕▓р╕вр╕Бр╕зр╣Ир╕▓ */

.new-timeline-step {
    flex: 1;
    text-align: center;
    position: relative;
    z-index: 2;
    padding-top: 50px; /* р╣Ар╕зр╣Йр╕Щр╕Чр╕╡р╣Ир╕кр╕│р╕лр╕гр╕▒р╕Ър╕зр╕Зр╕Бр╕ер╕бр╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ */
    color: #6c757d;
    font-size: 0.9em;
    font-weight: bold;
    min-width: 100px;
}

.new-timeline-icon {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 40px;
    background-color: white;
    border: 4px solid var(--step-inactive);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    color: var(--step-inactive);
    transition: all 0.4s;
}

.new-timeline-step.active .new-timeline-icon {
    border-color: var(--primary-color);
    background-color: var(--primary-color);
    color: white;
}

.new-timeline-step.active {
    color: var(--header-bg);
}

/* р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╣Ир╕зр╕Щр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Гр╕Хр╣Й Timeline */
#statusDetails {
    margin-top: 30px;
    border-top: 1px dashed #ddd;
    padding-top: 20px;
}

.status-detail-item {
    padding: 10px 0;
    border-bottom: 1px solid #eee;
    font-size: 0.95em;
    display: flex;
    align-items: center;
}
.status-detail-item:last-child {
    border-bottom: none;
}
.status-detail-item i {
    color: var(--primary-color);
    margin-right: 15px;
    font-size: 1.2em;
}
.status-detail-item strong {
    min-width: 150px;
    color: var(--header-bg);
}
.status-detail-item span {
    color: #333;
}
/* --- End Styles for Status Tracking Timeline (р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Гр╕лр╕бр╣И) --- */


.step-indicator {
display: flex;
justify-content: space-between;
margin-bottom: 40px;
}

.step-item {
flex-grow: 1;
text-align: center;
padding: 10px;
border-bottom: 4px solid var(--step-inactive);
color: var(--step-inactive);
font-weight: bold;
}

.step-item.active {
border-bottom-color: var(--step-active);
color: var(--step-active);
}

/* Service Selection Grid */
.service-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
gap: 20px;
}

.service-card {
background-color: #f4f6f8;
padding: 15px;
border-radius: 8px;
text-align: center;
cursor: pointer;
border: 2px solid transparent;
transition: all 0.3s;
}

.service-card:hover {
border-color: var(--primary-color);
box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
}

.service-card.selected {
border-color: var(--primary-color);
background-color: #e8f5e9;
}

/* *** р╣Бр╕Бр╣Йр╣Др╕В CSS р╕кр╣Ир╕зр╕Щр╕Щр╕╡р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕ер╕Ъ padding р╕нр╕нр╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕Яр╕нр╕гр╣Мр╕бр╣Ар╕Хр╣Зр╕бр╕Др╕зр╕▓р╕бр╕Бр╕зр╣Йр╕▓р╕З *** */
.form-section { display: none; padding: 0px; }
.form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
/* р╣Гр╕Кр╣Й form-control р╕Вр╕нр╕З Bootstrap р╣Бр╕Чр╕Щр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ width: 100% р╕Фр╣Йр╕зр╕вр╕Хр╕Щр╣Ар╕нр╕З */

.action-buttons { display: flex; justify-content: space-between; margin-top: 30px; }

.btn { padding: 10px 20px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: background-color 0.3s; }

.btn-next, .btn-confirm { background-color: var(--primary-color); color: white; }
.btn-previous { background-color: var(--step-inactive); color: #333; }
/* 5. Login Modal Styles (Pop-up) */
.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.7);
display: none; /* р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Лр╣Ир╕нр╕Щр╣Др╕зр╣Й */
justify-content: center;
align-items: center;
z-index: 2000;
}

.login-modal {
background-color: white;
padding: 0;
border-radius: 10px;
box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
width: 380px;
position: relative;
}

.modal-close {
position: absolute;
top: 10px;
right: 15px;
font-size: 1.5em;
color: #333;
cursor: pointer;
z-index: 20;
}
.modal-form-content {
padding: 20px;
}
.modal-form-content h2 {
margin-top: 0;
margin-bottom: 20px;
color: var(--modal-primary-color);
}
#trackingCustomerDetails {
margin-top: 15px;
border-top: 1px dashed #ccc;
padding-top: 15px;
}

#trackingCustomerDetails p {
margin: 5px 0;
}

/* **** CSS р╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin Dashboard **** */
/* р╕Лр╣Ир╕нр╕Щ Admin Dashboard р╣Бр╕ер╕░р╕кр╣Ир╕зр╕Щ Public р╕нр╕╖р╣Ир╕Щр╣Ж р╣Гр╕Щр╕Хр╕нр╕Щр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ */
#adminDashboardSection {
┬а ┬а display: none;
┬а ┬а padding: 20px 50px;
┬а ┬а background-color: #f4f6f9;
┬а ┬а min-height: calc(100vh - 60px); /* р╣Ар╕Хр╣Зр╕бр╕лр╕Щр╣Йр╕▓р╕Ир╕н */
┬а ┬а padding-top: 80px;
}
.dashboard-container {┬а
┬а ┬а max-width: 1200px;┬а
┬а ┬а margin-top: 50px;┬а
}
/* р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З Card links */
.card-link {
    text-decoration: none;
    color: inherit;
    cursor: pointer;
}
.card-link .card-custom:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15) !important;
}
.card-custom {┬а
┬а ┬а border-left: 5px solid #007bff;┬а
┬а ┬а border-radius: 0.5rem;┬а
    transition: all 0.3s;
    height: 100%; /* р╣Гр╕лр╣Й Card р╕кр╕╣р╕Зр╣Ар╕Чр╣Ир╕▓р╕Бр╕▒р╕Щ */
}

.bg-dark-admin {
┬а ┬а background-color: var(--header-bg) !important;
}
.navbar-admin {
┬а ┬а padding: 10px 50px !important;
}

/* **** CSS р╕кр╕│р╕лр╕гр╕▒р╕Ъ Confirmation (Step 3) р╣Гр╕лр╕бр╣И **** */
.confirmation-card {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    padding: 30px;
    margin-top: 30px;
    border: 2px solid var(--primary-color); /* р╕Бр╕гр╕нр╕Ър╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з */
}

.confirmation-header {
    text-align: center;
    margin-bottom: 30px;
    color: var(--primary-color);
    font-size: 1.8em;
    font-weight: bold;
}

.confirmation-section-title {
    font-size: 1.3em;
    color: var(--header-bg);
    margin-top: 25px;
    margin-bottom: 15px;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
    display: flex;
    align-items: center;
}
.confirmation-section-title i {
    margin-right: 10px;
    color: var(--primary-color);
}

.summary-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding: 8px 0;
    border-bottom: 1px dashed #f0f0f0;
}
.summary-item:last-child {
    border-bottom: none;
}
.summary-item i {
    color: var(--secondary-color);
    margin-right: 15px;
    font-size: 1.2em;
    width: 25px; /* Fixed width for icons */
    text-align: center;
}
.summary-item strong {
    min-width: 120px; /* Fixed width for labels */
    color: #555;
}
.summary-item span {
    flex-grow: 1;
    font-weight: normal;
    color: #333;
}
.summary-item .highlight {
    color: var(--primary-color);
    font-weight: bold;
}
/* CSS р╕кр╕│р╕лр╕гр╕▒р╕Ъ Gmail Mockup Modal */
#gmailModal .modal-content {
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}
#gmailModal .modal-header {
    background-color: #f44336; /* р╕кр╕╡р╣Бр╕Фр╕З Gmail */
    color: white;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}
#gmailModal .btn-send-mock {
    background-color: #4CAF50;
    color: white;
}

</style>
</head>
<body>
<div id="publicNavbar" class="navbar">
┬а ┬а <div class="logo">
┬а ┬а ┬а ┬а <i class="fas fa-car-side"></i> р╕гр╕░р╕Ър╕Ър╕Ир╕нр╕Зр╕Др╕┤р╕зр╕нр╕╣р╣Ир╕гр╕Цр╕вр╕Щр╕Хр╣М
┬а ┬а </div>
┬а ┬а <a href="#" class="login-btn" onclick="openModal(); return false;">
┬а ┬а ┬а ┬а <i class="fas fa-sign-in-alt"></i> Login
┬а ┬а </a>
</div>

<div id="publicContent">
┬а ┬а <div class="hero-section">
┬а ┬а ┬а ┬а <h1>р╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕Лр╣Ир╕нр╕бр╕гр╕Цр╕вр╕╕р╕Др╣Гр╕лр╕бр╣И р╕Фр╣Йр╕зр╕вр╕гр╕░р╕Ър╕Ър╕Ир╕нр╕Зр╕Др╕┤р╕зр╕нр╕нр╕Щр╣Др╕ер╕Щр╣М</h1>
┬а ┬а ┬а ┬а <p>р╕лр╕бр╕Фр╕Ыр╕▒р╕Нр╕лр╕▓р╕Бр╕▓р╕гр╕гр╕нр╕Др╕┤р╕зр╕Щр╕▓р╕Щр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕кр╕╖р╣Ир╕нр╕кр╕▓р╕гр╕Чр╕╡р╣Ир╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф р╕гр╕░р╕Ър╕Ър╕Чр╕╡р╣Ир╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╕Бр╕▓р╕гр╕Ър╕гр╕┤р╕лр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕нр╕╣р╣Ир╕Лр╣Ир╕нр╕бр╕гр╕Цр╕вр╕Щр╕Хр╣Мр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Ар╕Ыр╣Зр╕Щр╣Ар╕гр╕╖р╣Ир╕нр╕Зр╕Зр╣Ир╕▓р╕в</p>
┬а ┬а ┬а ┬а <a href="#trackingSection" class="booking-btn-main" onclick="showSection('statusTrackerSection'); return false;">
┬а ┬а ┬а ┬а ┬а ┬а <i class="fas fa-search"></i> р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░/р╕Ир╕нр╕Зр╕Др╕┤р╕з
┬а ┬а ┬а ┬а </a>
┬а ┬а </div>

┬а ┬а <div class="features-section">
┬а ┬а ┬а ┬а <h2 style="margin-bottom: 40px;">р╕Др╕╕р╕Ур╕кр╕бр╕Ър╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Бр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ</h2>
┬а ┬а ┬а ┬а <div class="features-grid">
┬а ┬а ┬а ┬а ┬а ┬а <div class="feature-item">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i class="fas fa-calendar-alt"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Др╕┤р╕зр╕Зр╣Ир╕▓р╕вр╣Бр╕ер╕░р╕гр╕зр╕Фр╣Ар╕гр╣Зр╕з</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p>р╕ер╕Фр╕Др╕зр╕▓р╕бр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕Ир╕Фр╕Др╕┤р╕зр╕Фр╣Йр╕зр╕вр╕бр╕╖р╕н р╣Бр╕ер╕░р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕зр╕▓р╕бр╕кр╕░р╕Фр╕зр╕Бр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╕Фр╕╣р╣Бр╕ер╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Хр╕▓р╕гр╕▓р╕Зр╕Зр╕▓р╕Щ</p>
┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <div class="feature-item">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i class="fas fa-bell"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p>р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Бр╕ер╕░р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓р╕Ьр╣Ир╕▓р╕Щ Email/LINE</p>
┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <div class="feature-item">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i class="fas fa-database"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕Ир╕▒р╕Фр╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕вр╣Ир╕▓р╕Зр╣Ар╕Ыр╣Зр╕Щр╕гр╕░р╕Ър╕Ъ</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p>р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕Кр╣Йр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╣Бр╕ер╕░р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Ър╕гр╕┤р╕Бр╕▓р╕г</p>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а 
┬а ┬а </div>
┬а ┬а┬а
┬а ┬а <div id="statusTrackerSection" style="padding: 60px 50px; text-align: center; background-color: var(--background-color);">
┬а ┬а ┬а ┬а <div class="main-container" style="box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);">
┬а ┬а ┬а ┬а ┬а ┬а <h2>р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕б</h2>
┬а ┬а ┬а ┬а ┬а ┬а <p>р╕Бр╕гр╕╕р╕Ур╕▓р╕Ыр╣Йр╕нр╕Щр╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╕лр╕гр╕╖р╕нр╕нр╕╡р╣Ар╕бр╕ер╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕Ир╕нр╕З р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕кр╕Цр╕▓р╕Щр╕░р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╕Вр╕нр╕Зр╕гр╕Цр╕Др╕╕р╕У</p>

┬а ┬а ┬а ┬а ┬а ┬а <div style="max-width: 400px; margin: 30px auto;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="text" id="trackingInput" placeholder="р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╕лр╕гр╕╖р╕нр╕нр╕╡р╣Ар╕бр╕е" value="" class="form-control" style="margin-bottom: 15px;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button class="btn tracking-btn" onclick="checkStatus()" style="width: 100%; background-color: var(--primary-color); color: white;">р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░</button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div id="statusResult" style="margin-top: 40px; text-align: left; padding: 20px; border: 1px solid #ddd; border-radius: 8px; display: none;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="trackingInfo"></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="trackingCustomerDetails">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 style="color: var(--header-bg); font-size: 1.1em; margin-bottom: 10px;">р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕З:</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><b>р╕Кр╕╖р╣Ир╕нр╕ер╕╣р╕Бр╕Др╣Йр╕▓:</b> <span id="trackCustomerName"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><b>р╕зр╕▒р╕Щр╕Щр╕▒р╕Фр╕лр╕бр╕▓р╕в:</b> <span id="trackCustomerDate"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><b>р╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕гр╕Ц:</b> <span id="trackCustomerPlate"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><b>р╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Б:</b> <span id="trackCustomerService"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <hr style="border-top: 1px dashed #ddd; margin: 20px 0;">

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div style="margin-top: 30px;">
                    <h3 style="text-align: center; color: var(--header-bg); font-weight: bold; margin-bottom: 20px;">
                        <i class="fas fa-tasks"></i> р╕кр╕Цр╕▓р╕Щр╕░р╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕б
                    </h3>
                    <div id="statusTimelineNew" class="new-timeline-container">
                        <div class="new-timeline-steps">
                            </div>
                        <div id="statusDetails">
                            </div>
                    </div>
                </div>
                ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div style="margin-top: 30px; display:none;"> 
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p style="font-weight: bold; text-align: center;">Timeline р╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓:</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="statusTimeline" style="display: none; justify-content: space-between; align-items: center; margin: 0 10px;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="timeline-step active-step" data-status="р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Ир╕нр╕З">1. р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Ир╕нр╕З</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <hr class="timeline-line active-line">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="timeline-step" data-status="р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕нр╕╣р╣И">2. р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕нр╕╣р╣И</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <hr class="timeline-line">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="timeline-step" data-status="р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г">3. р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <hr class="timeline-line">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="timeline-step" data-status="р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ">4. р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕И</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div style="text-align: center; margin-top: 40px;">
┬а ┬а ┬а ┬а ┬а ┬а <a href="#" onclick="showSection('bookingSection'); return false;" style="color: var(--header-bg); text-decoration: none; font-weight: bold;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕лр╕гр╕╖р╕нр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г <span style="color: var(--primary-color);">р╕Ир╕нр╕Зр╕Др╕┤р╕зр╣Гр╕лр╕бр╣И</span>? р╕Др╕ер╕┤р╕Бр╕Чр╕╡р╣Ир╕Щр╕╡р╣И
┬а ┬а ┬а ┬а ┬а ┬а </a>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а 
        <button id="backToAdminView" class="btn btn-secondary mt-3" style="display:none; margin: 0 auto;" onclick="filterAdminView('all'); return false;">
            <i class="fas fa-arrow-left"></i> р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕Фр╕╣р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
        </button>
┬а ┬а ┬а </div>
┬а ┬а┬а
┬а ┬а <div id="bookingSection" style="padding: 80px 50px; background-color: white; min-height: 600px; display: none;">
┬а ┬а ┬а ┬а <div class="main-container">
┬а ┬а ┬а ┬а ┬а ┬а <h2>р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Др╕┤р╕зр╕Ър╕гр╕┤р╕Бр╕▓р╕г</h2>

┬а ┬а ┬а ┬а ┬а ┬а <div class="step-indicator">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="step1" class="step-item active">1. р╣Ар╕ер╕╖р╕нр╕Бр╕Ър╕гр╕┤р╕Бр╕▓р╕г</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="step2" class="step-item">2. р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Щр╕▒р╕Фр╕лр╕бр╕▓р╕в</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="step3" class="step-item">3. р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З</div>
┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <div id="serviceSelection" class="form-section" style="display: block;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕ер╕╖р╕нр╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕бр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="service-grid">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="service-card" data-service="р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕вр╕▓р╕З"><i class="fas fa-tire"></i><h4>р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕вр╕▓р╕З</h4></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="service-card" data-service="р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И"><i class="fas fa-car-battery"></i><h4>р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И</h4></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="service-card" data-service="р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Цр╣Ир╕▓р╕вр╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З"><i class="fas fa-oil-can"></i><h4>р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Цр╣Ир╕▓р╕вр╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З</h4></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="service-card" data-service="р╣Ар╕Др╕ер╕╖р╕нр╕Ър╕кр╕╡р╕гр╕Цр╕вр╕Щр╕Хр╣М"><i class="fas fa-spray-can"></i><h4>р╣Ар╕Др╕ер╕╖р╕нр╕Ър╕кр╕╡р╕гр╕Цр╕вр╕Щр╕Хр╣М</h4></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="service-card" data-service="р╕Лр╣Ир╕нр╕бр╕Чр╕▒р╣Ир╕зр╣Др╕Ы"><i class="fas fa-wrench"></i><h4>р╕Лр╣Ир╕нр╕бр╕Чр╕▒р╣Ир╕зр╣Др╕Ы</h4></div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="action-buttons" style="justify-content: flex-end;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button class="btn btn-next" onclick="nextStep(1)">р╕Цр╕▒р╕Фр╣Др╕Ы</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
            ┬а ┬а ┬а ┬а ┬а ┬а <div id="customerForm" class="form-section">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Щр╕▒р╕Фр╕лр╕бр╕▓р╕в</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <form id="bookingForm">
                    <div class="row">
                        <div class="col-md-6 form-group mb-3">
                            <label for="firstName">р╕Кр╕╖р╣Ир╕нр╕Ир╕гр╕┤р╕З</label>
                            <input type="text" class="form-control" id="firstName" required>
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label for="lastName">р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е</label>
                            <input type="text" class="form-control" id="lastName" required>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 form-group mb-3">
                            <label for="phone">р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М</label>
                            <input type="tel" class="form-control" id="phone" required>
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label for="email">E-mail (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ)</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                    </div>

                    <div class="form-group mb-3">
                        <label for="licensePlate">р╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕гр╕Ц</label>
                        <input type="text" class="form-control" id="licensePlate" required>
                    </div>

                    <div class="row">
                        <div class="col-md-6 form-group mb-3">
                            <label for="bookingDate">р╣Ар╕ер╕╖р╕нр╕Бр╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕Ир╕нр╕З</label>
                            <input type="date" class="form-control" id="bookingDate" required>
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label for="bookingTime">р╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕зр╕ер╕▓р╕Ир╕нр╕З</label>
                            <input type="time" class="form-control" id="bookingTime" required>
                        </div>
                    </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="hidden" id="selectedService">

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="action-buttons">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="button" class="btn btn-previous" onclick="previousStep(2)">р╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ъ</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="button" class="btn btn-next" onclick="nextStep(2)">р╕Цр╕▒р╕Фр╣Др╕Ы</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </form>
┬а ┬а ┬а ┬а ┬а ┬а </div>
            <div id="confirmation" class="form-section">
                <div class="confirmation-card">
                    <h3 class="confirmation-header">
                        <i class="fas fa-check-circle"></i> р╕кр╕гр╕╕р╕Ыр╣Бр╕ер╕░р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З
                    </h3>
                    <p class="text-center text-muted mb-4">
                        р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕Зр╣Гр╕лр╣Йр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З р╕Бр╣Ир╕нр╕Щр╕Бр╕Фр╕вр╕╖р╕Щр╕вр╕▒р╕Щ
                    </p>

                    <div class="confirmation-section-title">
                        <i class="fas fa-calendar-alt"></i> р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Щр╕▒р╕Фр╕лр╕бр╕▓р╕в
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-tools"></i> <strong>р╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Б:</strong> 
                        <span id="summaryService" class="highlight"></span>
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-clock"></i> <strong>р╕зр╕▒р╕Щр╕Чр╕╡р╣И/р╣Ар╕зр╕ер╕▓:</strong> 
                        <span id="summaryDateTime" class="highlight"></span>
                    </div>

                    <div class="confirmation-section-title">
                        <i class="fas fa-user-circle"></i> р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Бр╕ер╕░р╕гр╕Цр╕вр╕Щр╕Хр╣М
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-user"></i> <strong>р╕Кр╕╖р╣Ир╕н-р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е:</strong> 
                        <span id="summaryFullName"></span>
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-phone-alt"></i> <strong>р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕г:</strong> 
                        <span id="summaryPhone"></span>
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-envelope"></i> <strong>E-mail:</strong> 
                        <span id="summaryEmail"></span>
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-car-side"></i> <strong>р╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕гр╕Ц:</strong> 
                        <span id="summaryPlate"></span>
                    </div>
                </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="action-buttons">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="button" class="btn btn-previous" onclick="previousStep(3)">р╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ъ</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button type="button" class="btn btn-confirm" onclick="confirmBooking()">р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
            ┬а ┬а ┬а ┬а ┬а ┬а <p id="bookingMessage" style="text-align: center; color: var(--primary-color); margin-top: 20px; font-weight: bold;"></p>

┬а ┬а ┬а ┬а </div>
┬а ┬а </div>
</div>
<div id="adminDashboardSection" style="display: none;">
┬а ┬а <nav id="adminNavbar" class="navbar navbar-dark bg-dark-admin navbar-admin fixed-top">
┬а ┬а ┬а ┬а <div class="container-fluid">
┬а ┬а ┬а ┬а ┬а ┬а <a class="navbar-brand" href="#">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i class="fas fa-tools"></i> Admin Dashboard
┬а ┬а ┬а ┬а ┬а ┬а </a>
┬а ┬а ┬а ┬а ┬а ┬а <button onclick="logout()" class="btn btn-danger">р╕нр╕нр╕Бр╕Ир╕▓р╕Бр╕гр╕░р╕Ър╕Ъ</button>
┬а ┬а ┬а ┬а </div>
┬а ┬а </nav>
┬а ┬а┬а
┬а ┬а <div class="container dashboard-container">
┬а ┬а ┬а ┬а <h1>ЁЯСЛ р╕вр╕┤р╕Щр╕Фр╕╡р╕Хр╣Йр╕нр╕Щр╕гр╕▒р╕Ъ, р╣Бр╕нр╕Фр╕бр╕┤р╕Щ</h1>
┬а ┬а ┬а ┬а <p class="lead">р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Др╕┤р╕зр╣Бр╕ер╕░р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕нр╕╣р╣И</p>
┬а ┬а ┬а ┬а <hr>

┬а ┬а ┬а ┬а <div class="row">
┬а ┬а ┬а ┬а ┬а ┬а <div class="col-md-4 mb-4">
                <a href="#" class="card-link" onclick="filterAdminView('today'); return false;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="card card-custom p-3 shadow">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕зр╕▒р╕Щр╕Щр╕╡р╣Й</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="fs-4 text-primary" id="todayBookingsCount">0 р╕Др╕┤р╕з</p>
                    ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="btn btn-sm btn-outline-primary" >р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
                </a>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="col-md-4 mb-4">
                <a href="#" class="card-link" onclick="filterAdminView('completed'); return false;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="card card-custom p-3 shadow" style="border-left-color: #28a745;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕гр╕Цр╕Чр╕╡р╣Ир╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="fs-4 text-success" id="completedBookingsCount">0 р╕Др╕▒р╕Щ</p>
                    ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="btn btn-sm btn-outline-success">р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф/р╕нр╕нр╕Бр╣Гр╕Ър╣Ар╕кр╕гр╣Зр╕И</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
                </a>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="col-md-4 mb-4">
                <a href="#" class="card-link" onclick="filterAdminView('progress'); return false;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="card card-custom p-3 shadow" style="border-left-color: #ffc107;">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕Зр╕▓р╕Щр╕Чр╕╡р╣Ир╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="fs-4 text-warning" id="inProgressBookingsCount">0 р╕Др╕▒р╕Щ</p>
                    ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="btn btn-sm btn-outline-warning">р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
                </a>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а <div class="card shadow mt-4">
┬а ┬а ┬а ┬а ┬а ┬а <div class="card-header bg-primary text-white">
                ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h4 id="adminTableTitle">р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Др╕┤р╕зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</h4>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="card-body">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <table class="table table-striped">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <thead>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th>#</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th>р╕Кр╕╖р╣Ир╕нр╕ер╕╣р╕Бр╕Др╣Йр╕▓</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th>р╕Ър╕гр╕┤р╕Бр╕▓р╕г</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th>р╕зр╕▒р╕Щр╕Щр╕▒р╕Фр╕лр╕бр╕▓р╕в</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <th>р╕кр╕Цр╕▓р╕Щр╕░</th>
                            <th>р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г</th>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </thead>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <tbody id="adminBookingTableBody">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </tbody>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </table>
                <button id="adminBackToAll" class="btn btn-secondary mt-3" style="display:none;" onclick="filterAdminView('all'); return false;">
                    <i class="fas fa-list"></i> р╣Бр╕кр╕Фр╕Зр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
                </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <p id="adminTableMessage" class="text-center text-muted mt-3" style="display:none;">р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕Щр╕╡р╣Й</p>
┬а ┬а ┬а ┬а </div>

┬а ┬а </div>
</div>
<div class="footer" style="background-color: #333; color: #ccc; padding: 20px; text-align: center;">
┬й 2025 Customer Booking and Notification System | DIT PIM
</div>


<div id="loginModal" class="modal-overlay">
<div class="login-modal">
<span class="modal-close" onclick="closeModal()">&times;</span>

<div class="modal-form-content">
┬а ┬а <h2 style="color: var(--header-bg);">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</h2>┬а
┬а ┬а <form id="employeeLoginForm">
┬а ┬а ┬а ┬а <div class="form-group">
┬а ┬а ┬а ┬а ┬а ┬а <label for="modalUsername">р╕нр╕╡р╣Ар╕бр╕е:</label>
┬а ┬а ┬а ┬а ┬а ┬а <input type="email" class="form-control" id="modalUsername" placeholder="E-mail (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Бр╕ер╕░р╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ)" required>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <div class="form-group">
┬а ┬а ┬а ┬а ┬а ┬а <label for="modalPassword">р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М:</label>
┬а ┬а ┬а ┬а ┬а ┬а <input type="tel" class="form-control" id="modalPassword" placeholder="р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Бр╕ер╕░р╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ)" required>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <button type="submit" class="btn btn-next" style="width: 100%; margin-top: 10px; background-color: var(--modal-primary-color);">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</button>
┬а ┬а </form>
┬а ┬а <p id="modalMessage" style="text-align: center; color: red; margin-top: 15px;"></p>
</div>
</div>
</div>

<div class="modal fade" id="gmailModal" tabindex="-1" aria-labelledby="gmailModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="gmailModalLabel"><i class="fas fa-envelope"></i> р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Ьр╣Ир╕▓р╕Щ Email (Mockup)</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted">
            <i class="fas fa-info-circle"></i> р╕Щр╕╡р╣Ир╕Др╕╖р╕нр╕Бр╕▓р╕гр╕Ир╕│р╕ер╕нр╕Зр╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕кр╕Цр╕▓р╕Щр╕░р╕Зр╕▓р╕Щр╣Др╕Ыр╕вр╕▒р╕Зр╕ер╕╣р╕Бр╕Др╣Йр╕▓
        </p>
        <div class="mb-3">
          <label class="form-label">р╕кр╣Ир╕Зр╕Цр╕╢р╕З (Email р╕ер╕╣р╕Бр╕Др╣Йр╕▓):</label>
          <input type="text" class="form-control" id="modalCustomerEmail" readonly>
        </div>
        <div class="mb-3">
          <label class="form-label">р╣Ар╕гр╕╖р╣Ир╕нр╕З (Subject):</label>
          <input type="text" class="form-control" id="modalEmailSubject" readonly>
        </div>
        <div class="mb-3">
          <label class="form-label">р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ:</label>
          <textarea class="form-control" id="modalEmailBody" rows="5" readonly></textarea>
        </div>
        <p class="text-success" id="modalGmailMessage" style="display:none; font-weight: bold;"><i class="fas fa-check"></i> р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Ир╕│р╕ер╕нр╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И!</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">р╕вр╕Бр╣Ар╕ер╕┤р╕Б</button>
        <button type="button" class="btn btn-send-mock" onclick="sendGmailMockup()">
            <i class="fas fa-paper-plane"></i> р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
        </button>
      </div>
    </div>
  </div>
</div>
<script>
// JavaScript р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Др╕зр╕Ър╕Др╕╕р╕б Logic р╣Бр╕ер╕░ UI р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
let currentStep = 1;
let selectedService = '';

// р╕ер╕│р╕Фр╕▒р╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕б (р╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╣Гр╕лр╣Йр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Вр╕╢р╣Йр╕Щ)
const STATUS_ORDER = [
    'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З', 
    'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б', 
    'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И', 
    'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г',
    'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц',
    'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в'
];

// р╣Др╕нр╕Др╕нр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕ер╕░р╕кр╕Цр╕▓р╕Щр╕░
const STATUS_ICONS = {
    'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З': 'fas fa-clipboard-check',
    'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б': 'fas fa-car-side',
    'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И': 'fas fa-wrench',
    'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г': 'fas fa-box-open',
    'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц': 'fas fa-check-circle',
    'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в': 'fas fa-handshake'
};


// ******* MOCK DATA: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕│р╕ер╕нр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕б (р╣Гр╕Кр╣Йр╣Ар╕Ыр╣Зр╕Щр╣Бр╕лр╕ер╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Фр╕╡р╕вр╕з) *******
const MOCK_BOOKINGS = {
// Key р╕Др╕╖р╕н р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М (р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: 0816507142)
'0816507142': { 
    id: 1,
    firstName: 'р╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М',
    lastName: 'р╕Юр╕гр╣Йр╕нр╕бр╕Лр╣Ир╕нр╕б',
    email: 'patidzazza@gmail.com', // р╣Ар╕Юр╕┤р╣Ир╕бр╕нр╕╡р╣Ар╕бр╕е
    plate: 'р╕Ър╕З 0001',
    service: 'р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И',
    status: 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И', // р╕Ыр╕гр╕▒р╕Ър╣Ар╕Ыр╣Зр╕Щр╕кр╕Цр╕▓р╕Щр╕░р╣Гр╕лр╕бр╣И
    date: '2025-11-28', // р╣Гр╕Кр╣Йр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ YYYY-MM-DD
    time: '21:26',
    details: [ 
        { timestamp: '2025-11-28 21:30', status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З', msg: 'р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з' },
        { timestamp: '2025-11-29 09:00', status: 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б', msg: 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕нр╕╣р╣Ир╣Бр╕ер╣Йр╕з р╕Бр╕│р╕ер╕▒р╕Зр╕гр╕нр╕Кр╣Ир╕▓р╕Зр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕нр╕▓р╕Бр╕▓р╕г' },
        { timestamp: '2025-11-29 11:30', status: 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И', msg: 'р╕Кр╣Ир╕▓р╕Зр╣Ар╕гр╕┤р╣Ир╕бр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣Ир╣Бр╕ер╣Йр╕з' }
    ]
},
'0811234567': {
    id: 2,
    firstName: 'р╕зр╕┤р╕Кр╕▒р╕в',
    lastName: 'р╕гр╕▒р╕Бр╕вр╕Щр╕Хр╣М',
    email: 'vichai@mail.com',
    plate: 'р╕Бр╕В 1234',
    service: 'р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕вр╕▓р╕З',
    status: 'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г',
    date: '2025-11-25',
    time: '10:00',
    details: [ 
        { timestamp: '2025-11-25 10:05', status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З', msg: 'р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з' },
        { timestamp: '2025-11-25 10:30', status: 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б', msg: 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕нр╕╣р╣И р╕Кр╣Ир╕▓р╕Зр╕Бр╕│р╕ер╕▒р╕Зр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╣Бр╕ер╕░р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣Ир╕вр╕▓р╕Зр╣Гр╕лр╕бр╣И' },
        { timestamp: '2025-11-25 14:00', status: 'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г', msg: 'р╕нр╕вр╕╣р╣Ир╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣Ир╕вр╕▓р╕Зр╕Вр╕Щр╕▓р╕Фр╕Юр╕┤р╣Ар╕ир╕й (р╕Бр╕│р╕лр╕Щр╕Фр╕Цр╕╢р╕З 1 р╕Ш.р╕Д.)' }
    ]
},
'test@email.com': { // р╣Гр╕Кр╣Й Key р╣Ар╕Ыр╣Зр╕Щр╕нр╕╡р╣Ар╕бр╕ер╕кр╕│р╕лр╕гр╕▒р╕Ъ Login/Tracking р╕Фр╣Йр╕зр╕в
    id: 3,
    firstName: 'р╕бр╕▓р╕ер╕╡',
    lastName: 'р╕бр╕╡р╕Кр╕▒р╕в',
    email: 'test@email.com',
    plate: 'р╕Щр╕Х 5678',
    service: 'р╣Ар╕Др╕ер╕╖р╕нр╕Ър╕кр╕╡р╕гр╕Цр╕вр╕Щр╕Хр╣М',
    status: 'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц',
    date: '2025-11-18',
    time: '14:30',
    details: [ 
        { timestamp: '2025-11-18 14:35', status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З', msg: 'р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з' },
        { timestamp: '2025-11-18 15:00', status: 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б', msg: 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕нр╕╣р╣И р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Хр╕▒р╕зр╣Ар╕Вр╣Йр╕▓р╕лр╣Йр╕нр╕Зр╕нр╕Ър╕кр╕╡' },
        { timestamp: '2025-11-19 12:00', status: 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И', msg: 'р╕Кр╣Ир╕▓р╕Зр╣Ар╕гр╕┤р╣Ир╕бр╕Зр╕▓р╕Щр╣Ар╕Др╕ер╕╖р╕нр╕Ър╕кр╕╡р╣Бр╕ер╣Йр╕з' },
        { timestamp: '2025-11-20 16:00', status: 'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц', msg: 'р╣Ар╕Др╕ер╕╖р╕нр╕Ър╕кр╕╡р╣Ар╕кр╕гр╣Зр╕Ир╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з р╕гр╕нр╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕▒р╕Ър╕гр╕Ц' }
    ]
},
'0909990000': {
    id: 4,
    firstName: 'р╕Юр╕▓р╕Чр╕┤р╕и',
    lastName: 'р╕Юр╕▒р╕Тр╕Щр╕▓р╕Фр╕▓',
    email: 'new_patit@mail.com',
    plate: '4р╕Бx 8127',
    service: 'р╕Лр╣Ир╕нр╕бр╕Чр╕▒р╣Ир╕зр╣Др╕Ы',
    status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З',
    date: new Date().toISOString().split('T')[0], // р╕зр╕▒р╕Щр╕Щр╕╡р╣Й
    time: '11:00',
    details: [ 
        { timestamp: `${new Date().toISOString().split('T')[0]} 11:05`, status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З', msg: 'р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з' }
    ]
}
};

// ** р╕Вр╣Йр╕нр╕бр╕╣р╕е Admin **
const ADMIN_EMAIL = 'admin@garage.com';┬а
const ADMIN_PHONE = '0811234567';


// **********************************************
// ********* ADMIN PANEL LOGIC ******************
// **********************************************

function getAdminBookingsData() {
    // р╣Бр╕Ыр╕ер╕З Object р╣Гр╕лр╣Йр╣Ар╕Ыр╣Зр╕Щ Array р╕Вр╕нр╕З Bookings
    const rawBookings = Object.keys(MOCK_BOOKINGS)
        .map(key => MOCK_BOOKINGS[key]);
        
    // р╣Гр╕Кр╣Й Map р╣Ар╕Юр╕╖р╣Ир╕нр╕Бр╕гр╕нр╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Бр╕▒р╕Щр╕Хр╕▓р╕б ID р╕Бр╣Ир╕нр╕Щ
    const uniqueBookingsMap = new Map();
    rawBookings.forEach(booking => {
        // р╣Гр╕Кр╣Й ID р╣Ар╕Ыр╣Зр╕Щ Key р╕лр╕ер╕▒р╕Бр╣Гр╕Щр╕Бр╕▓р╕гр╕Бр╕гр╕нр╕Зр╕Др╕зр╕▓р╕бр╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ
        if (booking && booking.id) {
            uniqueBookingsMap.set(booking.id, booking);
        }
    });

    return Array.from(uniqueBookingsMap.values())
        .sort((a, b) => b.id - a.id); // р╣Ар╕гр╕╡р╕вр╕Зр╕Ир╕▓р╕Бр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╣Др╕Ыр╣Ар╕Бр╣Ир╕▓р╕кр╕╕р╕Ф
}

// ** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И: р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕ер╕░р╣Ар╕Ыр╕┤р╕Ф Modal Gmail **
function openGmailModal(bookingId) {
    const booking = getAdminBookingsData().find(b => b.id === bookingId);
    if (!booking) return;

    // 1. р╣Ар╕Хр╕┤р╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕Зр╣Гр╕Щ Modal
    document.getElementById('modalCustomerEmail').value = booking.email;
    document.getElementById('modalEmailSubject').value = `р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕Цр╕▓р╕Щр╕░р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕бр╕гр╕Ц: ${booking.plate} - ${booking.status}`;
    document.getElementById('modalEmailBody').value = `р╣Ар╕гр╕╡р╕вр╕Щ р╕Др╕╕р╕У${booking.firstName} ${booking.lastName}\n\nр╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕бр╕гр╕Цр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ ${booking.plate} р╕Ър╕гр╕┤р╕Бр╕▓р╕г ${booking.service} р╕Вр╕нр╕Зр╕Чр╣Ир╕▓р╕Щ р╕Вр╕Ур╕░р╕Щр╕╡р╣Йр╕бр╕╡р╕кр╕Цр╕▓р╕Щр╕░р╕Др╕╖р╕н **${booking.status}**\n\n${booking.details[booking.details.length - 1].msg}\n\nр╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕ер╣Ир╕▓р╕кр╕╕р╕Фр╕Ьр╣Ир╕▓р╕Щр╕гр╕░р╕Ър╕Ъ Tracking\n\nр╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕Др╕гр╕▒р╕Ъ`;
    document.getElementById('modalGmailMessage').style.display = 'none';

    // 2. р╣Ар╕Ыр╕┤р╕Ф Modal
    const myModal = new bootstrap.Modal(document.getElementById('gmailModal'));
    myModal.show();
}

// ** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И: р╕Ир╕│р╕ер╕нр╕Зр╕Бр╕▓р╕гр╕кр╣Ир╕З Gmail **
function sendGmailMockup() {
    document.getElementById('modalGmailMessage').style.display = 'block';
    // р╣Гр╕Щ Production р╕Ир╕гр╕┤р╕З р╕Ир╕░р╣Ар╕Ыр╣Зр╕Щр╣Вр╕Др╣Йр╕Ф API р╣Гр╕Щр╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕е
    setTimeout(() => {
        // р╕Ыр╕┤р╕Ф Modal р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╣Ир╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И (р╕Ир╕│р╕ер╕нр╕З)
        const myModal = bootstrap.Modal.getInstance(document.getElementById('gmailModal'));
        if (myModal) myModal.hide();
    }, 1500);
}


function createAdminTableRow(booking) {
    const statusClasses = {
        'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З': 'bg-success',
        'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б': 'bg-primary',
        'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И': 'bg-warning text-dark',
        'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г': 'bg-info text-dark',
        'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц': 'bg-success',
        'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в': 'bg-secondary'
    };
    const statusClass = statusClasses[booking.status] || 'bg-info';
    
    // р╕кр╕гр╣Йр╕▓р╕Зр╕Ыр╕╕р╣Ир╕бр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕Цр╕▓р╕Щр╕░ (р╕Ир╕│р╕ер╕нр╕З)
    const nextStatus = getNextStatus(booking.status);
    const actionButton = `
        ${nextStatus 
            ? `<button class="btn btn-sm btn-info me-2" onclick="updateStatus(${booking.id}, '${nextStatus}')">р╕нр╕▒р╕Юр╣Ар╕Фр╕Хр╣Ар╕Ыр╣Зр╕Щ: ${nextStatus.split('/')[0]}</button>`
            : `<span class="text-muted me-2">р╕кр╕┤р╣Йр╕Щр╕кр╕╕р╕Ф</span>`
        }
        <button class="btn btn-sm btn-danger" data-bs-toggle="modal" onclick="openGmailModal(${booking.id})">
            <i class="fas fa-envelope"></i> р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
        </button>
    `;


    return `
        <tr data-id="${booking.id}" data-phone="${booking.plate}">
            <td>${booking.id}</td>
            <td>${booking.firstName} ${booking.lastName} (${booking.plate})</td>
            <td>${booking.service}</td>
            <td>${formatDateForDisplay(booking.date)} ${booking.time}</td>
            <td><span class="badge ${statusClass}">${booking.status}</span></td>
            <td>${actionButton}</td>
        </tr>
    `;
}

function updateStatus(bookingId, newStatus) {
    const now = new Date();
    // р╕кр╕гр╣Йр╕▓р╕З timestamp р╣Гр╕Щр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ YYYY-MM-DD HH:MM:SS
    const timestamp = `${now.toISOString().split('T')[0]} ${now.toTimeString().split(' ')[0]}`;

    let msg = `р╕кр╕Цр╕▓р╕Щр╕░р╕Цр╕╣р╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ **${newStatus}** р╣Вр╕Фр╕вр╣Бр╕нр╕Фр╕бр╕┤р╕Щ`;
    if (newStatus === 'р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Д/р╕гр╕нр╕Лр╣Ир╕нр╕б') msg = 'р╕гр╕Цр╕Вр╕нр╕Зр╕Чр╣Ир╕▓р╕Щр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕Бр╕гр╕░р╕Ър╕зр╕Щр╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╣Ар╕Кр╣Зр╕Др╣Бр╕ер╣Йр╕з';
    else if (newStatus === 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И') msg = 'р╕Кр╣Ир╕▓р╕Зр╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Лр╣Ир╕нр╕б р╣Бр╕ер╕░/р╕лр╕гр╕╖р╕нр╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣Ир╕Чр╕╡р╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ';
    else if (newStatus === 'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г') msg = 'р╕нр╕вр╕╣р╣Ир╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И р╕лр╕гр╕╖р╕нр╕Бр╕▓р╕гр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Лр╣Ир╕нр╕бр╕Хр╕▓р╕бр╕Ыр╕Бр╕Хр╕┤';
    else if (newStatus === 'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц') msg = 'р╕Зр╕▓р╕Щр╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Ар╕Юр╕╖р╣Ир╕нр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щр╣Бр╕ер╕░р╕гр╕▒р╕Ър╕гр╕Ц';
    else if (newStatus === 'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в') msg = 'р╕гр╕Цр╕Цр╕╣р╕Бр╕кр╣Ир╕Зр╕бр╕нр╕Ър╣Гр╕лр╣Йр╕Бр╕▒р╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕Ър╕гр╕┤р╕Бр╕▓р╕г';

    // р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Гр╕Щ MOCK_BOOKINGS (р╕Чр╕▒р╣Йр╕Зр╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╣Бр╕ер╕░р╕нр╕╡р╣Ар╕бр╕ер╕Др╕╡р╕вр╣М)
    Object.keys(MOCK_BOOKINGS).forEach(key => {
        if (MOCK_BOOKINGS[key].id === bookingId) {
            MOCK_BOOKINGS[key].status = newStatus;
            
            // р╣Ар╕Юр╕┤р╣Ир╕бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓ (Details)
            if (!MOCK_BOOKINGS[key].details) {
                MOCK_BOOKINGS[key].details = [];
            }
            MOCK_BOOKINGS[key].details.push({
                timestamp: timestamp,
                status: newStatus,
                msg: msg
            });
        }
    });
    
    // р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Хр╕▓р╕гр╕▓р╕З UI р╣Гр╕лр╕бр╣Ир╕Фр╣Йр╕зр╕в Filter р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ
    renderAdminBookings(localStorage.getItem('currentAdminFilter') || 'all');
}

function getNextStatus(currentStatus) {
    const currentIndex = STATUS_ORDER.indexOf(currentStatus);
    if (currentIndex >= 0 && currentIndex < STATUS_ORDER.length - 1) {
        return STATUS_ORDER[currentIndex + 1];
    }
    return null; // р╕кр╕Цр╕▓р╕Щр╕░р╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в
}

function formatDateForDisplay(dateString) {
    if (!dateString) return '';
    const parts = dateString.split('-');
    if (parts.length === 3) {
        const yearBE = parseInt(parts[0]) + 543;
        return `${parts[2]}/${parts[1]}/${yearBE}`;
    }
    // р╕кр╕│р╕лр╕гр╕▒р╕Ъ timestamp р╕Чр╕╡р╣Ир╕бр╕╡р╣Ар╕зр╕ер╕▓
    const datePart = dateString.split(' ')[0];
    const timePart = dateString.split(' ')[1] || '';

    const partsTimestamp = datePart.split('-');
    if (partsTimestamp.length === 3) {
        const yearBE = parseInt(partsTimestamp[0]) + 543;
        return `${partsTimestamp[2]}/${partsTimestamp[1]}/${yearBE}`;
    }

    return dateString;
}

// **** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И: р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╕Др╕ер╕┤р╕Бр╕Чр╕╡р╣И Card р╣Бр╕ер╕░р╕Бр╕гр╕нр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е ****
function filterAdminView(filterType = 'all') {
    const adminTableTitle = document.getElementById('adminTableTitle');
    const adminBackToAll = document.getElementById('adminBackToAll');
    let titleText = 'р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Др╕┤р╕зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф';
    
    // р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕лр╕▒р╕зр╕Вр╣Йр╕нр╣Бр╕ер╕░р╕Ыр╕╕р╣Ир╕б
    if (filterType === 'all') {
        titleText = 'р╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Др╕┤р╕зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф';
        adminBackToAll.style.display = 'none';
    } else {
        adminBackToAll.style.display = 'inline-block';
    }

    // р╕Бр╕│р╕лр╕Щр╕Фр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕лр╕▒р╕зр╕Вр╣Йр╕нр╕Хр╕▓р╕б filterType
    switch (filterType) {
        case 'today':
            titleText = 'р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Др╕┤р╕зр╕зр╕▒р╕Щр╕Щр╕╡р╣Й';
            break;
        case 'completed':
            // р╕кр╕Цр╕▓р╕Щр╕░р╕Чр╕╡р╣Ир╕Щр╕▒р╕Ър╕зр╣Ир╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щр╕Др╕╖р╕н 'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц' р╣Бр╕ер╕░ 'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в'
            titleText = 'р╕гр╕Цр╕Чр╕╡р╣Ир╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з (р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц/р╕кр╣Ир╕Зр╕бр╕нр╕Ър╣Бр╕ер╣Йр╕з)';
            break;
        case 'progress':
            // р╕кр╕Цр╕▓р╕Щр╕░р╕Чр╕╡р╣Ир╕Щр╕▒р╕Ър╕зр╣Ир╕▓р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Др╕╖р╕н 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И' р╣Бр╕ер╕░ 'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г'
            titleText = 'р╕Зр╕▓р╕Щр╕Чр╕╡р╣Ир╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г (р╕Лр╣Ир╕нр╕б/р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И)';
            break;
    }

    adminTableTitle.textContent = titleText;
    localStorage.setItem('currentAdminFilter', filterType);
    renderAdminBookings(filterType);
}

// **** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З: Render р╕Хр╕▓р╕гр╕▓р╕Зр╕Хр╕▓р╕б Filter ****
function renderAdminBookings(filterType = 'all') {
    const tableBody = document.getElementById('adminBookingTableBody');
    const bookings = getAdminBookingsData();
    const adminTableMessage = document.getElementById('adminTableMessage');
    
    tableBody.innerHTML = ''; 
    adminTableMessage.style.display = 'none';
    
    // 1. р╕Бр╕гр╕нр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
    let filteredBookings = bookings;
    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
    
    if (filterType === 'today') {
        filteredBookings = bookings.filter(b => b.date === today);
    } else if (filterType === 'completed') {
        filteredBookings = bookings.filter(b => b.status === 'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц' || b.status === 'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в');
    } else if (filterType === 'progress') {
        filteredBookings = bookings.filter(b => b.status === 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И' || b.status === 'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г'); 
    }
    
    // 2. р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З
    filteredBookings.forEach((booking) => {
        tableBody.innerHTML += createAdminTableRow(booking);
    });

    // 3. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Card Counters
    const allBookings = getAdminBookingsData();
    const todayCount = allBookings.filter(b => b.date === today).length;
    const completedCount = allBookings.filter(b => b.status === 'р╕Лр╣Ир╕нр╕бр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ/р╕гр╕нр╕гр╕▒р╕Ър╕гр╕Ц' || b.status === 'р╕кр╣Ир╕Зр╕бр╕нр╕Ър╕гр╕Цр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕в').length;
    const inProgressCount = allBookings.filter(b => b.status === 'р╕Бр╕│р╕ер╕▒р╕Зр╕Лр╣Ир╕нр╕б/р╕кр╕▒р╣Ир╕Зр╕нр╕░р╣Др╕лр╕ер╣И' || b.status === 'р╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И/р╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г').length;

    document.getElementById('todayBookingsCount').textContent = `${todayCount} р╕Др╕┤р╕з`;
    document.getElementById('completedBookingsCount').textContent = `${completedCount} р╕Др╕▒р╕Щ`;
    document.getElementById('inProgressBookingsCount').textContent = `${inProgressCount} р╕Др╕▒р╕Щ`;
    
    // р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Кр╕╖р╣Ир╕н Card (р╣Ар╕Фр╕┤р╕бр╣Ар╕Ыр╣Зр╕Щ 'р╕Зр╕▓р╕Щр╕Чр╕╡р╣Ир╕гр╕нр╕нр╕░р╣Др╕лр╕ер╣И')
    document.querySelector('.col-md-4:nth-child(3) h3').textContent = 'р╕Зр╕▓р╕Щр╕Чр╕╡р╣Ир╕Бр╕│р╕ер╕▒р╕Зр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕г';

    // р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З р╣Гр╕лр╣Йр╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
    if (filteredBookings.length === 0) {
        tableBody.innerHTML = `<tr><td colspan="6" class="text-center text-muted">р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕Щр╕╡р╣Й</td></tr>`;
    }
}


// **********************************************
// ********* PUBLIC/BOOKING LOGIC ***************
// **********************************************

// 1. р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╣Ар╕ер╕╖р╕нр╕Б Service (р╣Вр╕Др╣Йр╕Фр╣Ар╕Фр╕┤р╕б)
document.querySelectorAll('.service-card').forEach(card => {
    card.addEventListener('click', function() {
        document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
        this.classList.add('selected');
        selectedService = this.getAttribute('data-service');
        document.getElementById('selectedService').value = selectedService;
    });
});

// 2. р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ Step (р╕Лр╣Ир╕нр╕Щ/р╣Бр╕кр╕Фр╕З) (р╣Вр╕Др╣Йр╕Фр╣Ар╕Фр╕┤р╕б)
function updateStepIndicator() {
    document.querySelectorAll('.step-item').forEach((item, index) => {
        item.classList.remove('active');
        if (index + 1 === currentStep) {
            item.classList.add('active');
        }
    });
}
document.querySelector('.booking-btn-main').addEventListener('click', function(e) {
    e.preventDefault();
    showSection('statusTrackerSection');
});

function nextStep(fromStep) {
    if (fromStep === 1) {
        if (!selectedService) {
            alert('р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕ер╕╖р╕нр╕Бр╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Бр╣Ир╕нр╕Щ');
            return;
        }
        document.getElementById('serviceSelection').style.display = 'none';
        document.getElementById('customerForm').style.display = 'block';
        currentStep = 2;
        // ** NEW: Reset customer form before showing step 2 **
        document.getElementById('bookingForm').reset();
    } else if (fromStep === 2) {
        const form = document.getElementById('bookingForm');
        if (!form.checkValidity()) {
            alert('р╕Бр╕гр╕╕р╕Ур╕▓р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╣Йр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ');
            form.reportValidity();
            return;
        }
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const bookingDate = document.getElementById('bookingDate').value; // YYYY-MM-DD
        
        // р╣Ар╕Хр╕┤р╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕Зр╣Гр╕Щ HTML р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И
        document.getElementById('summaryService').textContent = selectedService;
        document.getElementById('summaryFullName').textContent = `${firstName} ${lastName}`;┬а
        document.getElementById('summaryPhone').textContent = document.getElementById('phone').value;
        document.getElementById('summaryEmail').textContent = document.getElementById('email').value;
        document.getElementById('summaryPlate').textContent = document.getElementById('licensePlate').value;
        // р╣Бр╕Ыр╕ер╕Зр╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕кр╕Фр╕Зр╕Ьр╕е
        document.getElementById('summaryDateTime').textContent =
            formatDateForDisplay(bookingDate) + ' ' + document.getElementById('bookingTime').value;

        document.getElementById('customerForm').style.display = 'none';
        document.getElementById('confirmation').style.display = 'block';
        currentStep = 3;
    }
    updateStepIndicator();
}

function previousStep(fromStep) {
    if (fromStep === 2) {
        document.getElementById('customerForm').style.display = 'none';
        document.getElementById('serviceSelection').style.display = 'block';
        currentStep = 1;
    } else if (fromStep === 3) {
        document.getElementById('confirmation').style.display = 'none';
        document.getElementById('customerForm').style.display = 'block';
        currentStep = 2;
    }
    updateStepIndicator();
}

function confirmBooking() {
    const messageElement = document.getElementById('bookingMessage');
    messageElement.style.color = 'var(--primary-color)';
    const phone = document.getElementById('phone').value.trim();
    const email = document.getElementById('email').value.toLowerCase().trim();
    const firstName = document.getElementById('firstName').value;
    const lastName = document.getElementById('lastName').value;
    const licensePlate = document.getElementById('licensePlate').value;
    const bookingDate = document.getElementById('bookingDate').value;
    const bookingTime = document.getElementById('bookingTime').value;
    const selectedService = document.getElementById('selectedService').value;

    // р╕лр╕▓ ID р╕ер╣Ир╕▓р╕кр╕╕р╕Ф
    const currentMaxId = Object.values(MOCK_BOOKINGS).reduce((max, b) => Math.max(max, b.id || 0), 0);
    const newId = currentMaxId + 1;
    
    const now = new Date();
    const timestamp = `${now.toISOString().split('T')[0]} ${now.toTimeString().split(' ')[0]}`;

    // р╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Гр╕лр╕бр╣И
    const newBookingData = {
        id: newId,
        firstName: firstName,
        lastName: lastName,
        email: email,
        plate: licensePlate,
        service: selectedService,
        status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З',┬а// р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
        date: bookingDate,
        time: bookingTime,
        details: [
            { timestamp: timestamp, status: 'р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Ир╕нр╕З', msg: 'р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з' }
        ]
    };

    // 1. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Вр╣Йр╕▓ MOCK_BOOKINGS
    MOCK_BOOKINGS[phone] = newBookingData;
    MOCK_BOOKINGS[email] = newBookingData; 

    // 2. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕ер╕Зр╣Гр╕Щ Local Storage (р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕Ир╕│)
    // ** NEW: Save only tracking info, not customer form fields **
    localStorage.setItem('lastTrackingInput', phone);

    // 3. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Хр╕▓р╕гр╕▓р╕З Admin р╕Чр╕▒р╕Щр╕Чр╕╡ (р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й filter р╣Ар╕Юр╕гр╕▓р╕░р╣Ар╕Юр╕┤р╣Ир╕Зр╕Ир╕нр╕Зр╣Гр╕лр╕бр╣И)
    renderAdminBookings('all'); 

    messageElement.textContent = 'тЬЕ р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕Цр╕╣р╕Бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕кр╕│р╣Ар╕гр╣Зр╕И! (р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з)';
    setTimeout(() => {
        // р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕лр╕Щр╣Йр╕▓ Tracking
        showSection('statusTrackerSection');
        document.getElementById('trackingInput').value = phone;
        checkStatus();
        messageElement.textContent = '';
    }, 2000);
}


// ** р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣И: р╣Бр╕кр╕Фр╕Зр╕Ьр╕е Timeline р╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓ (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓) **
function renderNewStatusTimeline(bookingData) {
    const timelineContainer = document.querySelector('#statusTimelineNew .new-timeline-steps');
    const detailsContainer = document.getElementById('statusDetails');
    timelineContainer.innerHTML = '';
    detailsContainer.innerHTML = '';
    
    const currentStatusIndex = STATUS_ORDER.indexOf(bookingData.status);

    // 1. р╕зр╕▓р╕Ф Timeline (6 р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ)
    STATUS_ORDER.forEach((statusName, index) => {
        const isActive = index <= currentStatusIndex;
        const stepDiv = document.createElement('div');
        stepDiv.classList.add('new-timeline-step');
        if (isActive) {
            stepDiv.classList.add('active');
        }
        
        stepDiv.innerHTML = `
            <div class="new-timeline-icon" style="background-color: ${isActive ? 'var(--primary-color)' : 'white'}; border-color: ${isActive ? 'var(--primary-color)' : 'var(--step-inactive)'};">
                <i class="${STATUS_ICONS[statusName] || 'fas fa-info'}" style="color: ${isActive ? 'white' : 'var(--step-inactive)'};"></i>
            </div>
            ${statusName.split('/').join('<br>')}
        `;
        timelineContainer.appendChild(stepDiv);
    });
    
    // р╣Гр╕Кр╣Й JS р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕╡р╣Ар╕кр╣Йр╕Щр╣Ар╕Кр╕╖р╣Ир╕нр╕б (р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Чр╕│р╣Др╕Фр╣Йр╕Зр╣Ир╕▓р╕вр╕Фр╣Йр╕зр╕в CSS р╕нр╕вр╣Ир╕▓р╕Зр╣Ар╕Фр╕╡р╕вр╕зр╣Ар╕Щр╕╖р╣Ир╕нр╕Зр╕Ир╕▓р╕Бр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕З DOM)
    // р╣Вр╕Фр╕вр╕Бр╕▓р╕гр╕Бр╕│р╕лр╕Щр╕Фр╕Др╕зр╕▓р╕бр╕Бр╕зр╣Йр╕▓р╕Зр╕Вр╕нр╕Зр╣Ар╕кр╣Йр╕Щр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕▒р╕Ър╣Ар╕кр╣Йр╕Щр╕кр╕╡р╣Ар╕Чр╕▓
    const percentage = (currentStatusIndex / (STATUS_ORDER.length - 1)) * 100;
    // р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡ activeLine element р╕лр╕гр╕╖р╕нр╣Др╕бр╣И р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡р╣Гр╕лр╣Йр╕кр╕гр╣Йр╕▓р╕З
    let activeLine = document.querySelector('#statusTimelineNew #activeLine');
    if (!activeLine) {
        activeLine = document.createElement('div');
        activeLine.id = 'activeLine';
        activeLine.style.cssText = `
            position: absolute; top: 20px; left: 0; height: 4px; background-color: var(--primary-color); z-index: 1; transition: width 0.5s;
        `;
        // р╣Ар╕Юр╕┤р╣Ир╕б activeLine р╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╣Гр╕Щ container р╕Чр╕╡р╣Ир╕бр╕╡ relative position
        document.querySelector('.new-timeline-steps').style.position = 'relative'; // р╕Чр╕│р╣Гр╕лр╣Йр╕бр╕▒р╣Ир╕Щр╣Гр╕Ир╕зр╣Ир╕▓р╣Ар╕Ыр╣Зр╕Щ relative
        document.querySelector('.new-timeline-steps').appendChild(activeLine);
    }
    activeLine.style.width = `${percentage}%`;


    // 2. р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓ (History)
    if (bookingData.details && bookingData.details.length > 0) {
        detailsContainer.innerHTML = `
            <h4 style="color: var(--header-bg); margin-bottom: 15px;">
                <i class="fas fa-history" style="color: var(--primary-color);"></i> р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Зр╕▓р╕Щ
            </h4>
        `;
        // р╣Ар╕гр╕╡р╕вр╕Зр╕ер╕│р╕Фр╕▒р╕Ър╕Ир╕▓р╕Бр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╣Др╕Ыр╣Ар╕Бр╣Ир╕▓р╕кр╕╕р╕Ф
        bookingData.details.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).forEach(detail => {
            const dateStr = formatDateForDisplay(detail.timestamp.split(' ')[0]);
            const timeStr = detail.timestamp.split(' ')[1].substring(0, 5);
            detailsContainer.innerHTML += `
                <div class="status-detail-item">
                    <i class="fas fa-long-arrow-alt-right"></i>
                    <strong>${detail.status}:</strong> 
                    <span>${detail.msg} (${dateStr} ${timeStr})</span>
                </div>
            `;
        });
    } else {
         detailsContainer.innerHTML = `<p class="text-muted text-center">р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Др╕зр╕▓р╕бр╕Др╕╖р╕Ър╕лр╕Щр╣Йр╕▓р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Зр╕▓р╕Щр╕Щр╕╡р╣Й</p>`;
    }
}


function checkStatus() {
    const input = document.getElementById('trackingInput').value.trim().toLowerCase();
    const resultBox = document.getElementById('statusResult');
    const infoDiv = document.getElementById('trackingInfo');
    
    // р╕Др╣Йр╕Щр╕лр╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щ MOCK_BOOKINGS
    const data = MOCK_BOOKINGS[input];

    resultBox.style.display = 'none';
    if (data) {
        document.getElementById('trackCustomerName').textContent = `${data.firstName} ${data.lastName}`;┬а
        document.getElementById('trackCustomerDate').textContent = formatDateForDisplay(data.date); 
        document.getElementById('trackCustomerPlate').textContent = data.plate;
        document.getElementById('trackCustomerService').textContent = data.service;
        infoDiv.innerHTML = `
        <p style="font-size: 1.1em; color: var(--header-bg);"><b>р╕кр╕Цр╕▓р╕Щр╕░р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ:</b> <strong style="color: var(--primary-color);">${data.status}</strong></p>
        `;
        resultBox.style.display = 'block';
        
        // ** р╣Гр╕Кр╣Йр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Гр╕лр╕бр╣Ир╣Гр╕Щр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕е Timeline **
        renderNewStatusTimeline(data);
        
    } else {
        infoDiv.innerHTML = `<p style="color: red; text-align: center; font-weight: bold;">р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ъ ${input}. р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М/р╕нр╕╡р╣Ар╕бр╕е</p>`;
        document.getElementById('statusResult').style.display = 'block';
        document.querySelector('#statusTimelineNew .new-timeline-steps').innerHTML = ''; // р╣Ар╕Др╕ер╕╡р╕вр╕гр╣М Timeline
        document.getElementById('statusDetails').innerHTML = ''; // р╣Ар╕Др╕ер╕╡р╕вр╕гр╣М Details
    }
}


/* 4. р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕кр╕ер╕▒р╕Ър╕лр╕Щр╣Йр╕▓р╕Ир╕нр╕лр╕ер╕▒р╕Б (Booking/Tracking vs Admin) */
function showSection(sectionId) {
┬а ┬а // р╕Лр╣Ир╕нр╕Щр╕Чр╕╕р╕Б Section р╕лр╕ер╕▒р╕Б
┬а ┬а document.getElementById('publicContent').style.display = 'none';
┬а ┬а document.getElementById('adminDashboardSection').style.display = 'none';
┬а ┬а document.getElementById('publicNavbar').style.display = 'none';
┬а ┬а┬а
┬а ┬а if (sectionId === 'adminDashboardSection') {
┬а ┬а ┬а ┬а // р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░ Admin Dashboard
┬а ┬а ┬а ┬а document.getElementById('adminDashboardSection').style.display = 'block';
┬а ┬а ┬а ┬а document.getElementById('adminDashboardSection').scrollIntoView({ behavior: 'smooth' });
        // р╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Фр╣Йр╕зр╕в filter р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щр╕Вр╕нр╕З Admin
        filterAdminView(localStorage.getItem('currentAdminFilter') || 'all');
┬а ┬а } else {
┬а ┬а ┬а ┬а // р╣Бр╕кр╕Фр╕Зр╕кр╣Ир╕зр╕Щ Public Content (Hero, Booking, Tracking)
┬а ┬а ┬а ┬а document.getElementById('publicContent').style.display = 'block';
┬а ┬а ┬а ┬а document.getElementById('publicNavbar').style.display = 'flex'; // р╣Бр╕кр╕Фр╕З Navbar Public
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕вр╣Ир╕нр╕вр╣Гр╕Щ Public Content
┬а ┬а ┬а ┬а document.getElementById('bookingSection').style.display = 'none';
┬а ┬а ┬а ┬а document.getElementById('statusTrackerSection').style.display = 'none';
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а document.getElementById(sectionId).style.display = 'block';
┬а ┬а ┬а ┬а document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
┬а ┬а }
}


/* 5. Logic р╕кр╕│р╕лр╕гр╕▒р╕Ъ Login Modal */
function openModal() {
┬а ┬а document.getElementById('modalMessage').textContent = '';
┬а ┬а document.getElementById('employeeLoginForm').reset();
┬а ┬а document.getElementById('loginModal').style.display = 'flex';
}

function closeModal() {
┬а ┬а document.getElementById('loginModal').style.display = 'none';
}

document.querySelector('.login-btn').addEventListener('click', function(e) {
┬а ┬а e.preventDefault();
┬а ┬а openModal();
});

document.getElementById('employeeLoginForm').addEventListener('submit', function(e) {
┬а ┬а e.preventDefault();
┬а ┬а const email = document.getElementById('modalUsername').value.toLowerCase().trim();
┬а ┬а const phone = document.getElementById('modalPassword').value.trim();
┬а ┬а const msg = document.getElementById('modalMessage');

┬а ┬а // 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Login р╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ
┬а ┬а if (email === ADMIN_EMAIL && phone === ADMIN_PHONE) {
┬а ┬а ┬а ┬а msg.style.color = 'green';
┬а ┬а ┬а ┬а msg.textContent = 'тЬЕ р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ Admin р╕кр╕│р╣Ар╕гр╣Зр╕И! р╕Бр╕│р╕ер╕▒р╕Зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕кр╣Йр╕Щр╕Чр╕▓р╕З...';
        localStorage.setItem('currentMode', 'admin'); 
┬а ┬а ┬а ┬а setTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а closeModal();
            // р╣Ар╕бр╕╖р╣Ир╕н Login р╣Ар╕Ыр╣Зр╕Щ Admin р╣Гр╕лр╣Йр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Filter р╣Ар╕Ыр╣Зр╕Щ 'all'
            localStorage.setItem('currentAdminFilter', 'all'); 
┬а ┬а ┬а ┬а ┬а ┬а showSection('adminDashboardSection');┬а
┬а ┬а ┬а ┬а }, 1000);
┬а ┬а ┬а ┬а return;┬а
┬а ┬а }

┬а ┬а // 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Login р╕ер╕╣р╕Бр╕Др╣Йр╕▓
┬а ┬а let customerData = MOCK_BOOKINGS[email] || MOCK_BOOKINGS[phone];
┬а ┬а┬а
┬а ┬а if (customerData) {
┬а ┬а ┬а ┬а msg.style.color = 'green';
┬а ┬а ┬а ┬а msg.textContent = 'тЬЕ р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕кр╕│р╣Ар╕гр╣Зр╕И! (р╕Др╕╕р╕Ур╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓р╕Хр╣Ир╕▓р╕Зр╕Щр╕╡р╣Йр╣Др╕Фр╣Й)';

        // р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Чр╕╡р╣И Login р╕кр╕│р╣Ар╕гр╣Зр╕Ир╕ер╕Зр╣Гр╕Щ Local Storage
        const loggedInKey = phone || email; 
        localStorage.setItem('lastTrackingInput', loggedInKey); // Save only tracking key
        localStorage.removeItem('currentMode'); 
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а setTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а closeModal();
            showSection('statusTrackerSection');
            document.getElementById('trackingInput').value = loggedInKey;
            checkStatus();
┬а ┬а ┬а ┬а }, 1500);
┬а ┬а ┬а ┬а return;
┬а ┬а }
┬а ┬а┬а
┬а ┬а // 3. р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
┬а ┬а msg.style.color = 'red';
┬а ┬а msg.textContent = 'р╕нр╕╡р╣Ар╕бр╕ер╕лр╕гр╕╖р╕нр╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З р╕Бр╕гр╕╕р╕Ур╕▓р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З';
});

/* 6. р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ Logout р╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin */
function logout() {
    localStorage.removeItem('lastTrackingInput');
    localStorage.removeItem('currentMode'); 
    localStorage.removeItem('currentAdminFilter');

┬а ┬а // р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╣Бр╕кр╕Фр╕Зр╕кр╣Ир╕зр╕Щ Public Content (р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б)
┬а ┬а showSection('statusTrackerSection');┬а
    document.getElementById('trackingInput').value = '';
    document.getElementById('statusResult').style.display = 'none';
    // ** NEW: Reset Customer Form to ensure it's empty after logout **
    document.getElementById('bookingForm').reset();
┬а ┬а alert('р╕нр╕нр╕Бр╕Ир╕▓р╕Бр╕гр╕░р╕Ър╕Ър╣Бр╕ер╣Йр╕з');
}

// *** р╣Вр╕Др╣Йр╕Ф DOMContentLoaded ***
document.addEventListener('DOMContentLoaded', () => {
    // 1. **р╣Бр╕Бр╣Йр╣Др╕В:** р╕ер╣Йр╕▓р╕Зр╕Др╣Ир╕▓ trackingInput р╣Бр╕ер╕░р╕Лр╣Ир╕нр╕Щ statusResult р╕Бр╣Ир╕нр╕Щ
    document.getElementById('trackingInput').value = ''; 
    document.getElementById('statusResult').style.display = 'none'; 
    
    // ** NEW: р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Яр╕нр╕гр╣Мр╕бр╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕нр╕нр╕Бр╣Ар╕кр╕бр╕нр╣Ар╕бр╕╖р╣Ир╕нр╣Вр╕лр╕ер╕Фр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╣Гр╕лр╕бр╣И **
    document.getElementById('bookingForm').reset();
    
    const lastTrackingInput = localStorage.getItem('lastTrackingInput');
    const currentMode = localStorage.getItem('currentMode');
    
    // 2. р╕ер╕Ър╣Вр╕Др╣Йр╕Фр╕Чр╕╡р╣Ир╣Ар╕Др╕вр╕Фр╕╢р╕З lastCustomerData р╕бр╕▓р╣Ар╕Хр╕┤р╕бр╣Гр╕Щр╕Яр╕нр╕гр╣Мр╕бр╕нр╕нр╕Б
    // if (lastCustomerData) { ... } р╕Цр╕╣р╕Бр╕ер╕Ър╕нр╕нр╕Бр╣Др╕Ыр╣Бр╕ер╣Йр╕з
    
    // 3. р╣Бр╕кр╕Фр╕З Admin Dashboard р╕лр╕гр╕╖р╕нр╕лр╕Щр╣Йр╕▓ Public
    if (currentMode === 'admin') {
        // р╕Хр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Б filterAdminView р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й renderAdminBookings р╕Цр╕╣р╕Бр╣Ар╕гр╕╡р╕вр╕Бр╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Ъ filter р╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
        filterAdminView(localStorage.getItem('currentAdminFilter') || 'all');
        showSection('adminDashboardSection');
    } else {
        showSection('statusTrackerSection'); 
        
        // 4. р╕Цр╣Йр╕▓р╕бр╕╡р╕Др╣Ир╕▓ lastTrackingInput (р╕Чр╕╡р╣Ир╣Ар╕Др╕вр╕Ир╕нр╕Зр╣Др╕зр╣Й/р╣Ар╕Др╕в Login) р╣Гр╕лр╣Йр╣Ар╕Хр╕┤р╕бр╕Др╣Ир╕▓р╣Гр╕Щр╕Кр╣Ир╕нр╕Зр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░ (р╣Бр╕Хр╣Ир╣Др╕бр╣Ир╣Ар╕гр╕╡р╕вр╕Б checkStatus)
        if (lastTrackingInput) {
            document.getElementById('trackingInput').value = lastTrackingInput;
        }
    }
    
    // р╣Гр╕лр╣Й Render р╕Хр╕▓р╕гр╕▓р╕З Admin р╣Др╕зр╣Йр╣Ар╕кр╕бр╕нр╣Ар╕Юр╕╖р╣Ир╕нр╕Др╕│р╕Щр╕зр╕Ур╕Хр╕▒р╕зр╕Щр╕▒р╕Ър╣Гр╕Щ Card
    renderAdminBookings(localStorage.getItem('currentAdminFilter') || 'all');
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>