<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบจองคิวอู่ซ่อมรถยนต์</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* CSS สำหรับดีไซน์ทั้งหมด */
        
        :root {
            --header-bg: #37474f; /* สีน้ำเงินเข้ม/เทาเข้ม สำหรับ Header */
            --primary-color: #4CAF50; /* สีเขียวหลักสำหรับปุ่มและเน้น */
            --secondary-color: #26a69a; 
            --step-active: var(--primary-color);
            --step-inactive: #bdc3c7;
            --background-color: #f8f9fa; 
            
            /* สีสำหรับ Login Modal */
            --modal-bg-color: #D3746D; 
            --modal-primary-color: #B3514A;
            --modal-font-light: white;
        }

        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding-top: 60px; 
            background-color: var(--background-color);
            color: #333;
        }

        /* 1. Navbar และปุ่ม Login */
        .navbar {
            background-color: var(--header-bg);
            padding: 10px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            box-sizing: border-box;
            color: white;
        }

        .logo {
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .login-btn {
            background-color: transparent; 
            color: white;
            padding: 8px 15px;
            border: 1px solid white;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background-color: white;
            color: var(--header-bg);
        }
        
        .login-btn i {
            margin-right: 5px;
        }


        /* 2. ส่วน Hero/Header หลัก */
        .hero-section {
            padding: 100px 50px;
            background-color: var(--header-bg); 
            color: white;
            text-align: center;
        }

        .hero-section h1 {
            font-size: 2.5em; 
            margin-bottom: 10px;
        }

        .hero-section p {
            font-size: 1.1em;
            max-width: 700px;
            margin: 0 auto 30px auto;
        }

        .booking-btn-main {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            text-decoration: none;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .booking-btn-main:hover {
            background-color: #388e3c;
        }
        
        /* 3. ส่วน Features */
        .features-section {
            padding: 60px 50px;
            text-align: center;
            background-color: var(--background-color);
        }

        .features-grid {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 30px;
        }

        .feature-item {
            padding: 20px;
            border-radius: 8px;
            width: 30%;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .feature-item i {
            font-size: 2em;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        /* 4. Booking Steps Section & Tracking */
        #bookingSection, #statusTrackerSection {
            padding: 80px 50px;
            background-color: white;
            min-height: 600px;
        }

        .main-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* --- Styles for Status Tracking Timeline --- */
        .timeline-step {
            width: 100px;
            text-align: center;
            position: relative;
            padding: 10px 0;
            color: var(--step-inactive);
            font-size: 0.85em;
        }

        .timeline-step::before {
            content: '';
            display: block;
            width: 20px;
            height: 20px;
            background-color: var(--step-inactive);
            border-radius: 50%;
            margin: 0 auto 5px auto;
            border: 3px solid white;
            box-shadow: 0 0 0 2px var(--step-inactive);
            transition: all 0.3s;
        }

        .timeline-step.active-step {
            color: #333;
        }
        
        .timeline-step.active-step::before {
            background-color: var(--primary-color);
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        .timeline-line {
            flex-grow: 1;
            height: 4px;
            background-color: var(--step-inactive);
            margin: 0 -10px;
            transition: background-color 0.3s;
        }
        
        .timeline-line.active-line {
            background-color: var(--primary-color);
        }
        /* --- End Status Tracking Styles --- */
        
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }

        .step-item {
            flex-grow: 1;
            text-align: center;
            padding: 10px;
            border-bottom: 4px solid var(--step-inactive);
            color: var(--step-inactive);
            font-weight: bold;
        }

        .step-item.active {
            border-bottom-color: var(--step-active);
            color: var(--step-active);
        }

        /* Service Selection Grid */
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .service-card {
            background-color: #f4f6f8;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .service-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .service-card.selected {
            border-color: var(--primary-color);
            background-color: #e8f5e9;
        }

        .service-card i {
            font-size: 2em;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .form-section { display: none; padding: 20px; }
        
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        
        .form-group input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        
        .action-buttons { display: flex; justify-content: space-between; margin-top: 30px; }

        .btn { padding: 10px 20px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: background-color 0.3s; }

        .btn-next, .btn-confirm { background-color: var(--primary-color); color: white; }
        
        .btn-previous { background-color: var(--step-inactive); color: #333; }
        
        /* 5. Login Modal Styles (Pop-up) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* เริ่มต้นซ่อนไว้ */
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .login-modal {
            background-color: white;
            padding: 0;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            width: 380px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5em;
            color: #333;
            cursor: pointer;
            z-index: 20;
        }
        
        .modal-form-content {
            padding: 20px;
        }
        
        .modal-form-content h2 {
            margin-top: 0;
            margin-bottom: 20px;
            color: var(--modal-primary-color);
        }
        
        #trackingCustomerDetails {
            margin-top: 15px;
            border-top: 1px dashed #ccc;
            padding-top: 15px;
        }

        #trackingCustomerDetails p {
            margin: 5px 0;
        }

    </style>
</head>
<body>
    
    <div class="navbar">
        <div class="logo">
            <i class="fas fa-car-side"></i> ระบบจองคิวอู่รถยนต์
        </div>
        <a href="#" class="login-btn" onclick="openModal(); return false;">
            <i class="fas fa-sign-in-alt"></i> Login
        </a>
    </div>

    <div class="hero-section">
        <h1>บริการซ่อมรถยุคใหม่ ด้วยระบบจองคิวออนไลน์</h1>
        <p>หมดปัญหาการรอคิวนานและการสื่อสารที่ผิดพลาด ระบบที่ช่วยให้การบริหารจัดการอู่ซ่อมรถยนต์ของคุณเป็นเรื่องง่าย</p>
        
        <a href="#trackingSection" class="booking-btn-main" onclick="showSection('statusTrackerSection'); return false;">
            <i class="fas fa-search"></i> ตรวจสอบสถานะ/จองคิว
        </a>
    </div>

    <div class="features-section">
        <h2 style="margin-bottom: 40px;">คุณสมบัติหลักของระบบ</h2>
        <div class="features-grid">
            
            <div class="feature-item">
                <i class="fas fa-calendar-alt"></i>
                <h3>จัดการคิวง่ายและรวดเร็ว</h3>
                <p>ลดความผิดพลาดจากการจดคิวด้วยมือ และเพิ่มความสะดวกให้ผู้ดูแลจัดการตารางงาน</p>
            </div>

            <div class="feature-item">
                <i class="fas fa-bell"></i>
                <h3>แจ้งเตือนลูกค้าอัตโนมัติ</h3>
                <p>ส่งข้อความยืนยันการจองและการแจ้งเตือนล่วงหน้าผ่าน Email/LINE</p>
            </div>

            <div class="feature-item">
                <i class="fas fa-database"></i>
                <h3>จัดเก็บข้อมูลอย่างเป็นระบบ</h3>
                <p>บันทึกประวัติการจองทั้งหมดในฐานข้อมูลเพื่อใช้อ้างอิงและปรับปรุงบริการ</p>
            </div>

        </div>
    </div>
    
    <div id="statusTrackerSection" style="padding: 60px 50px; text-align: center; background-color: var(--background-color);">
        <div class="main-container" style="box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);">
            <h2>ตรวจสอบความคืบหน้างานซ่อม</h2>
            <p>กรุณาป้อนเบอร์โทรศัพท์หรืออีเมลที่ใช้จอง เพื่อดูสถานะปัจจุบันของรถคุณ</p>

            <div style="max-width: 400px; margin: 30px auto;">
                <input type="text" id="trackingInput" placeholder="เบอร์โทรศัพท์หรืออีเมล" value="0816507142" style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; margin-bottom: 15px;">
                <button class="btn tracking-btn" onclick="checkStatus()" style="width: 100%; background-color: var(--primary-color); color: white;">ตรวจสอบสถานะ</button>
            </div>
            
            <div id="statusResult" style="margin-top: 40px; text-align: left; padding: 20px; border: 1px solid #ddd; border-radius: 8px; display: none;">
                
                <div id="trackingInfo"></div>
                
                <div id="trackingCustomerDetails">
                    <h3 style="color: var(--header-bg); font-size: 1.1em; margin-bottom: 10px;">ข้อมูลการจอง:</h3>
                    <p><b>ชื่อลูกค้า:</b> <span id="trackCustomerName"></span></p>
                    <p><b>วันนัดหมาย:</b> <span id="trackCustomerDate"></span></p>
                    <p><b>ทะเบียนรถ:</b> <span id="trackCustomerPlate"></span></p>
                    <p><b>บริการที่เลือก:</b> <span id="trackCustomerService"></span></p>
                </div>
                
                <hr style="border-top: 1px dashed #ddd; margin: 20px 0;">

                <div style="margin-top: 30px;">
                    <p style="font-weight: bold; text-align: center;">Timeline ความคืบหน้า:</p>
                    <div id="statusTimeline" style="display: flex; justify-content: space-between; align-items: center; margin: 0 10px;">
                        <span class="timeline-step active-step" data-status="ยืนยันจอง">1. ยืนยันจอง</span>
                        <hr class="timeline-line active-line">
                        <span class="timeline-step" data-status="รถเข้าอู่">2. รถเข้าอู่</span>
                        <hr class="timeline-line">
                        <span class="timeline-step" data-status="กำลังดำเนินการ">3. กำลังซ่อม</span>
                        <hr class="timeline-line">
                        <span class="timeline-step" data-status="ซ่อมเสร็จสิ้น">4. ซ่อมเสร็จ</span>
                    </div>
                </div>
                
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
             <a href="#" onclick="showSection('bookingSection'); return false;" style="color: var(--header-bg); text-decoration: none; font-weight: bold;">
                 หรือต้องการ <span style="color: var(--primary-color);">จองคิวใหม่</span>? คลิกที่นี่
             </a>
        </div>
    </div>
    
    <div id="bookingSection" style="padding: 80px 50px; background-color: white; min-height: 600px; display: none;"> 
        <div class="main-container">
            
            <h2>ขั้นตอนการจองคิวบริการ</h2>

            <div class="step-indicator">
                <div id="step1" class="step-item active">1. เลือกบริการ</div>
                <div id="step2" class="step-item">2. ข้อมูลนัดหมาย</div>
                <div id="step3" class="step-item">3. ยืนยันการจอง</div>
            </div>

            <div id="serviceSelection" class="form-section" style="display: block;">
                <h3>กรุณาเลือกประเภทงานซ่อมที่ต้องการ</h3>
                
                <div class="service-grid">
                    <div class="service-card" data-service="เปลี่ยนยาง"><i class="fas fa-tire"></i><h4>เปลี่ยนยาง</h4></div>
                    <div class="service-card" data-service="เปลี่ยนแบตเตอรี่"><i class="fas fa-car-battery"></i><h4>เปลี่ยนแบตเตอรี่</h4></div>
                    <div class="service-card" data-service="เปลี่ยนถ่ายน้ำมันเครื่อง"><i class="fas fa-oil-can"></i><h4>เปลี่ยนถ่ายน้ำมันเครื่อง</h4></div>
                    <div class="service-card" data-service="เคลือบสีรถยนต์"><i class="fas fa-spray-can"></i><h4>เคลือบสีรถยนต์</h4></div>
                    <div class="service-card" data-service="ซ่อมทั่วไป"><i class="fas fa-wrench"></i><h4>ซ่อมทั่วไป</h4></div>
                </div>

                <div class="action-buttons" style="justify-content: flex-end;">
                    <button class="btn btn-next" onclick="nextStep(1)">ถัดไป</button>
                </div>
            </div>
            
            <div id="customerForm" class="form-section">
                <h3>กรอกข้อมูลลูกค้าและการนัดหมาย</h3>
                <form id="bookingForm">
                    <div class="form-group">
                        <label for="firstName">ชื่อจริง</label>
                        <input type="text" id="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">นามสกุล</label>
                        <input type="text" id="lastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">เบอร์โทรศัพท์</label>
                        <input type="tel" id="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="email">E-mail (สำหรับการแจ้งเตือน)</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="licensePlate">ทะเบียนรถ</label>
                        <input type="text" id="licensePlate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="bookingDate">เลือกวันที่จอง</label>
                        <input type="date" id="bookingDate" required>
                    </div>
                     <div class="form-group">
                        <label for="bookingTime">เลือกเวลาจอง</label>
                        <input type="time" id="bookingTime" required>
                    </div>

                    <input type="hidden" id="selectedService">

                    <div class="action-buttons">
                        <button type="button" class="btn btn-previous" onclick="previousStep(2)">ย้อนกลับ</button>
                        <button type="button" class="btn btn-next" onclick="nextStep(2)">ถัดไป</button>
                    </div>
                </form>
            </div>
            
            <div id="confirmation" class="form-section">
                <h3>สรุปและยืนยันการจอง</h3>
                <p>กรุณาตรวจสอบรายละเอียดการจองด้านล่างให้ถูกต้อง:</p>
                <ul id="summaryList" style="list-style: none; padding: 0; text-align: left;">
                    <li>**บริการที่เลือก:** <span id="summaryService"></span></li>
                    <li>**วันที่/เวลา:** <span id="summaryDateTime"></span></li>
                    <hr>
                    <li>**ชื่อ-นามสกุล:** <span id="summaryFullName"></span></li>
                    <li>**เบอร์โทร:** <span id="summaryPhone"></span></li>
                    <li>**E-mail:** <span id="summaryEmail"></span></li>
                    <li>**ทะเบียนรถ:** <span id="summaryPlate"></span></li>
                </ul>

                <div class="action-buttons">
                    <button type="button" class="btn btn-previous" onclick="previousStep(3)">ย้อนกลับ</button>
                    <button type="button" class="btn btn-confirm" onclick="confirmBooking()">ยืนยันการจอง</button>
                </div>
            </div>

            <p id="bookingMessage" style="text-align: center; color: var(--primary-color); margin-top: 20px; font-weight: bold;"></p>

        </div> 
    </div>
    
    <div class="footer" style="background-color: #333; color: #ccc; padding: 20px; text-align: center;">
        © 2025 Customer Booking and Notification System | DIT PIM
    </div>


    <div id="loginModal" class="modal-overlay">
        <div class="login-modal">
            <span class="modal-close" onclick="closeModal()">&times;</span>

            <div class="modal-form-content">
                <h2 style="color: var(--header-bg);">Login (พนักงาน)</h2>
                <form id="employeeLoginForm">
                    <div class="form-group">
                        <label for="modalUsername">Gmail:</label>
                        <input type="text" id="modalUsername" placeholder="Gmail (Username)" required>
                    </div>

                    <div class="form-group">
                        <label for="modalPassword">เบอร์โทรศัพท์:</label>
                        <input type="password" id="modalPassword" placeholder="Phone Number (Password)" required>
                    </div>

                    <button type="submit" class="btn btn-next" style="width: 100%; margin-top: 10px; background-color: var(--modal-primary-color);">เข้าสู่ระบบ</button>
                </form>
                <p id="modalMessage" style="text-align: center; color: red; margin-top: 15px;"></p>
            </div>
        </div>
    </div>
    <script>
        // JavaScript สำหรับควบคุม Logic และ UI ทั้งหมด
        
        let currentStep = 1;
        let selectedService = '';
        
        // ******* MOCK DATA: ข้อมูลจำลองสถานะงานซ่อม *******
        // ข้อมูลถูกปรับให้มี First Name และ Last Name
        const MOCK_STATUSES = {
            '0816507142': { // เบอร์โทรศัพท์ในภาพ
                firstName: 'สมบูรณ์',
                lastName: 'พร้อมซ่อม',
                plate: 'บง 0001',
                service: 'เปลี่ยนแบตเตอรี่',
                status: 'ยืนยันจอง', 
                date: '28/11/2568'
            },
            '0811234567': {
                firstName: 'วิชัย',
                lastName: 'รักยนต์',
                plate: 'กข 1234',
                service: 'เปลี่ยนยาง',
                status: 'กำลังดำเนินการ', 
                date: '25/11/2568'
            },
            'test@email.com': {
                firstName: 'มาลี',
                lastName: 'มีชัย',
                plate: 'นต 5678',
                service: 'เคลือบสีรถยนต์',
                status: 'ซ่อมเสร็จสิ้น', 
                date: '18/11/2568'
            }
        };
        
        // 1. จัดการการเลือก Service
        document.querySelectorAll('.service-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedService = this.getAttribute('data-service');
                document.getElementById('selectedService').value = selectedService;
            });
        });

        // 2. จัดการการเปลี่ยน Step (ซ่อน/แสดง)
        function updateStepIndicator() {
            document.querySelectorAll('.step-item').forEach((item, index) => {
                item.classList.remove('active');
                if (index + 1 === currentStep) {
                    item.classList.add('active');
                }
            });
        }
        
        // ฟังก์ชันเลื่อนไปยังส่วน Booking
        document.querySelector('.booking-btn-main').addEventListener('click', function(e) {
            e.preventDefault();
            // เมื่อกดปุ่มหลัก ให้แสดงส่วน Tracking ก่อน
            showSection('statusTrackerSection');
        });


        function nextStep(fromStep) {
            if (fromStep === 1) {
                if (!selectedService) {
                    alert('กรุณาเลือกบริการที่ต้องการก่อน');
                    return;
                }
                document.getElementById('serviceSelection').style.display = 'none';
                document.getElementById('customerForm').style.display = 'block';
                currentStep = 2;
            } else if (fromStep === 2) {
                // ตรวจสอบความถูกต้องของข้อมูล
                const form = document.getElementById('bookingForm');
                if (!form.checkValidity()) {
                    alert('กรุณากรอกข้อมูลให้ครบถ้วน');
                    form.reportValidity();
                    return;
                }
                
                // เตรียมข้อมูลสรุป
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                
                document.getElementById('summaryService').textContent = selectedService;
                document.getElementById('summaryFullName').textContent = `${firstName} ${lastName}`; // ใช้ชื่อเต็ม
                document.getElementById('summaryPhone').textContent = document.getElementById('phone').value;
                document.getElementById('summaryEmail').textContent = document.getElementById('email').value;
                document.getElementById('summaryPlate').textContent = document.getElementById('licensePlate').value;
                document.getElementById('summaryDateTime').textContent = 
                    document.getElementById('bookingDate').value + ' ' + document.getElementById('bookingTime').value;

                document.getElementById('customerForm').style.display = 'none';
                document.getElementById('confirmation').style.display = 'block';
                currentStep = 3;
            }
            updateStepIndicator();
        }

        function previousStep(fromStep) {
            if (fromStep === 2) {
                document.getElementById('customerForm').style.display = 'none';
                document.getElementById('serviceSelection').style.display = 'block';
                currentStep = 1;
            } else if (fromStep === 3) {
                document.getElementById('confirmation').style.display = 'none';
                document.getElementById('customerForm').style.display = 'block';
                currentStep = 2;
            }
            updateStepIndicator();
        }

        // 3. ฟังก์ชันยืนยันการจอง (จำลองการส่งข้อมูล)
        function confirmBooking() {
            const messageElement = document.getElementById('bookingMessage');
            messageElement.style.color = 'var(--primary-color)';
            
            // ดึงข้อมูลที่เพิ่งกรอก (จาก Step 2)
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const licensePlate = document.getElementById('licensePlate').value;
            const bookingDate = document.getElementById('bookingDate').value;
            const selectedService = document.getElementById('selectedService').value;
            
            // ************ จุดสำคัญ: จำลองการบันทึกข้อมูลเข้า MOCK_STATUSES ************
            // บันทึกข้อมูลการจองใหม่ลงใน MOCK_STATUSES โดยใช้เบอร์โทรศัพท์เป็น Key
            MOCK_STATUSES[phone] = {
                firstName: firstName,
                lastName: lastName,
                plate: licensePlate,
                service: selectedService,
                status: 'ยืนยันจอง', // สถานะเริ่มต้น
                date: bookingDate
            };
            
            // ใช้อีเมลเป็น Key สำรอง (ถ้าต้องการค้นหาด้วยอีเมล)
            MOCK_STATUSES[email.toLowerCase()] = MOCK_STATUSES[phone];
            // ********************************************************
            
            messageElement.textContent = '✅ ข้อมูลการจองถูกบันทึกสำเร็จ! (ตอนนี้สามารถตรวจสอบสถานะได้แล้ว)';
            
            // นำผู้ใช้กลับไปหน้า Tracking พร้อมเติมเบอร์โทรที่จองล่าสุดเพื่อแสดงสถานะ
            setTimeout(() => {
                showSection('statusTrackerSection');
                document.getElementById('trackingInput').value = phone; 
                checkStatus(); 
                messageElement.textContent = ''; 
            }, 2000);
        }

        /* 4. Logic สำหรับ Status Tracker */
        function checkStatus() {
            const input = document.getElementById('trackingInput').value.trim(); 
            const resultBox = document.getElementById('statusResult');
            const infoDiv = document.getElementById('trackingInfo');
            const timelineSteps = document.querySelectorAll('#statusTimeline .timeline-step');
            const timelineLines = document.querySelectorAll('#statusTimeline .timeline-line');
            
            const data = MOCK_STATUSES[input];
            
            // ซ่อนผลลัพธ์เก่า
            resultBox.style.display = 'none';
            
            if (data) {
                // --- แสดงข้อมูลลูกค้า ---
                document.getElementById('trackCustomerName').textContent = `${data.firstName} ${data.lastName}`; // แสดงชื่อ-นามสกุลเต็ม
                document.getElementById('trackCustomerDate').textContent = data.date;
                document.getElementById('trackCustomerPlate').textContent = data.plate;
                document.getElementById('trackCustomerService').textContent = data.service; 
                
                // แสดงสถานะปัจจุบัน
                infoDiv.innerHTML = `
                    <p style="font-size: 1.1em; color: var(--header-bg);"><b>สถานะปัจจุบัน:</b> <strong style="color: var(--primary-color);">${data.status}</strong></p>
                `;
                
                resultBox.style.display = 'block';
                document.getElementById('statusTimeline').style.display = 'flex';
                
                // --- อัปเดต Timeline ---
                let foundCurrent = false;
                timelineSteps.forEach((step, index) => {
                    const line = timelineLines[index];
                    
                    step.classList.remove('active-step');
                    if (line) line.classList.remove('active-line');
                    
                    if (step.getAttribute('data-status') === data.status) {
                        foundCurrent = true;
                        step.classList.add('active-step'); 
                    } else if (!foundCurrent) {
                        step.classList.add('active-step'); // สถานะที่ผ่านแล้ว
                        if (line) line.classList.add('active-line'); // เส้นที่ผ่านแล้ว active
                    }
                });
                
            } else {
                // ไม่พบข้อมูล
                infoDiv.innerHTML = `<p style="color: red; text-align: center; font-weight: bold;">ไม่พบข้อมูลการจองสำหรับ ${input}. กรุณาตรวจสอบเบอร์โทรศัพท์/อีเมล</p>`;
                document.getElementById('statusResult').style.display = 'block';
                document.getElementById('statusTimeline').style.display = 'none';
            }
        }
        
        // ฟังก์ชันสลับหน้าจอหลัก (Booking vs Tracking)
        function showSection(sectionId) {
            // ซ่อนทุก Section หลัก
            document.getElementById('bookingSection').style.display = 'none';
            document.getElementById('statusTrackerSection').style.display = 'none';
            
            // แสดง Section ที่ต้องการ
            document.getElementById(sectionId).style.display = 'block';
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }


        /* 5. Logic สำหรับ Login Modal (Pop-up) */
        function openModal() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        // Logic การกดปุ่ม Login (Navbar)
        document.querySelector('.login-btn').addEventListener('click', function(e) {
            e.preventDefault(); 
            openModal();
        });

        // Logic การตรวจสอบ Login (จำลองการส่งข้อมูล)
        document.getElementById('employeeLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('modalUsername').value;
            const password = document.getElementById('modalPassword').value;
            const msg = document.getElementById('modalMessage');

            // ใช้ข้อมูลที่เราสร้างใน app.py: admin@garage.com / 0811234567
            if (username === 'admin@garage.com' && password === '0811234567') {
                msg.style.color = 'green';
                msg.textContent = '✅ Login สำเร็จ!';
                setTimeout(() => {
                    closeModal();
                }, 1500); 
            } else {
                msg.style.color = 'red';
                msg.textContent = 'ข้อมูลไม่ถูกต้อง';
            }
        });

        
    </script>
</body>
</html>